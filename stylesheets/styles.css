:root {
  --sky-col: lightblue;
  --sky-grad-col: #E7F4F8;
  --ground-col: antiquewhite;
  --ground-grad-col: #FEF9F3;
  --grid-sky-row-num: 3;
  --grid-ground-row-num: 9;
  --grid-row-num: calc(var(--grid-sky-row-num) + var(--grid-ground-row-num));
  --grid-col-num: 21; /* letters A-U */
  --grid-cell-length: min(calc(100vh/var(--grid-row-num, 12)), calc(100vw/var(--grid-col-num, 21)));
}

html, body {
  height: 100%;
  overflow: hidden; /* stop page-level scrolling entirely */
}

#viewport { /* acts as the scene camera, for panning and zooming */
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;       /* crops during zooms */
  /* transform-origin: center center; */
  transform-origin: top left;
  transition: transform 2s ease-in-out;
  will-change: transform; /* use GPU memory to create own rendering layer for improved zooming & panning transitions (where frame rate matters) i.e. reduced blurring/flicker, no intermediate re-layouts, etc - ONLY USE ON ELEMENTS WITH LOTS OF CHANGES ELSE WOULD WASTE GPU MEMORY */
  perspective: 1000px;    /* optional for depth */
  display: grid;
  grid-template: "window-size" 1fr / 1fr;
}

/* OVERARCHING GRIDS */

#bg-colours-grid,
#placement-grid {
  grid-area: window-size;
  /* These grids define:
   - the centre area vs extended background when window is taller or wider than the central area, i.e.
      grid-template-areas: "bg  bg  bg"
                           "bg main bg"
                           "bg main bg"
                           "bg  bg  bg";
     (nb. .top.left / .top.right / .bottom.left / .bottom.right are now redundant but were originally meant to show on super tall/wide screens)
   - the sky vs ground bg-colours, i.e.
      grid-template-areas: " sky    sky    sky"
                           " sky    sky    sky"
                           "ground ground ground"
                           "ground ground ground";
  */
  min-height: calc(var(--grid-row-num) * var(--grid-cell-length)); /*500px /*150vh*/;
  min-width: calc(var(--grid-col-num) * var(--grid-cell-length)); /*500px /*150vw*/;
  display: grid;
  grid-template-rows: 1fr calc(var(--grid-sky-row-num)*var(--grid-cell-length)) calc(var(--grid-ground-row-num)*var(--grid-cell-length)) 1fr; /*nb for #placement-grid, this would've been sufficient: calc(var(--grid-row-num)*var(--grid-cell-length)) */
  grid-template-columns: 1fr calc(var(--grid-col-num)*var(--grid-cell-length)) 1fr;
  /* grid-template-rows: 1fr 0.5fr 1.5fr 1fr;
  grid-template-columns: 1fr 2fr 1fr; */
}
#bg-colours-grid .top { grid-row: 1 / 2; }
#bg-colours-grid .sky.v-centre { grid-row: 2 / 3; }
#bg-colours-grid .ground.v-centre { grid-row: -2 / -3; }
#bg-colours-grid .bottom { grid-row: -1 / -2; }
#bg-colours-grid .left { grid-column: 1 / 2; }
#bg-colours-grid .h-centre { grid-column: 2 / -2; }
#bg-colours-grid .right { grid-column: -1 / -2; }
/* #bg-colours-grid .sky { grid-row: 1 / 3; }
#bg-colours-grid .ground { grid-row: -1 / -3; } */

#bg-colours-grid > main.sky {
  background-color: var(--sky-col);
}
#bg-colours-grid > .sky.v-centre.left {
  background: linear-gradient(270deg, var(--sky-col), var(--sky-grad-col));
}
#bg-colours-grid > .sky.v-centre.right {
  background: linear-gradient(90deg, var(--sky-col), var(--sky-grad-col));
}
#bg-colours-grid > .sky.top.h-centre {
  background: linear-gradient(0deg, var(--sky-col), var(--sky-grad-col));
}
/* #bg-colours-grid > .sky.top.left {
  background: radial-gradient(ellipse at 100% 100%, var(--sky-col), white);
}
#bg-colours-grid > .sky.top.right {
  background: radial-gradient(ellipse at 0% 100%, var(--sky-col), white);
} */
#bg-colours-grid > main.ground {
  background-color: var(--ground-col);
}
#bg-colours-grid > .ground.v-centre.left {
  background: linear-gradient(270deg, var(--ground-col), var(--ground-grad-col));
}
#bg-colours-grid > .ground.v-centre.right {
  background: linear-gradient(90deg, var(--ground-col), var(--ground-grad-col));
}
#bg-colours-grid > .ground.bottom.h-centre {
  background: linear-gradient(180deg, var(--ground-col), var(--ground-grad-col));
}
/* #bg-colours-grid > .ground.bottom.left {
  background: radial-gradient(ellipse at 100% 0%, var(--ground-col), white);
}
#bg-colours-grid > .ground.bottom.right {
  background: radial-gradient(ellipse at 0% 0%, var(--ground-col), white);
} */

#placement-grid > #day-numbers {
  grid-area: 2 / 2 / -2 / -2;
  /* This (centre area only) grid defines:
   - the advent calendar day 1~25 assigned per animation
   - each day uses the same bell background image for clarity (can be toggled off in menu to only see the number)
  */
  display: grid;
  grid-template-rows: repeat(18, 1fr); /* divides each #scene cell into 4 cells, for more accurate placement */
  grid-template-columns: repeat(52, 1fr);
  justify-items: center; /* default, to be adjusted as needed per number bell */
  align-items: center;
  z-index: 99; /* only affects visual stacking, not clicks */
  pointer-events: none; /* clicks are ignored, to prevent blocking of scene grid animation clicks */
}
#day-numbers > .bell {
  grid-area: 1 / 1 / -1 / -1; /* temporary default to prevent any skewing of grid track sizes as new days are added (before their actual area is assigned) */
  background-image: url(../media/imgs/day-number/bell-152195_squashed.png);
  background-size: contain;
  background-repeat: no-repeat;
  width: 1.7rem;
  height: 1.7rem; /* alt. ~2.5rem (equiv. 1.75rem) */
  font-size: 0.75rem; /* with 1rem default*/
  font-style: italic;
  font-family: 'Times New Roman', Times, serif;
  display: flex; /* centres the number in middle of bell image */
  justify-content: center;
  align-items: center;
}
/* #day-numbers > #day1 {
} */

#placement-grid > #day-numbers > .bell,
#placement-grid > main#scene .clickable {
  pointer-events: auto; /* regain clickability */
}

#placement-grid > main#scene {
  grid-area: 2 / 2 / -2 / -2;
  /* This (centre area only) grid defines:
   - all animations and contextual images (grouped into sections by in-scene location)
   - the perspective of the scene overall
  */
  border: 2px dotted red;
  display: grid;
  grid-template-rows: repeat(var(--grid-row-num, 12), var(--grid-cell-length));
  grid-template-columns: repeat(var(--grid-col-num, 21), var(--grid-cell-length));
  grid-template-areas:/*1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20  21 */
            /*1/-12*/ "S1A S1B S1C S1D S1E S1F S1G S1H S1I S1J S1K S1L S1M S1N S1O S1P S1Q S1R S1S S1T S1U" /*1/-12*/
            /*2/-11*/ "S2A S2B S2C S2D S2E S2F S2G S2H S2I S2J S2K S2L S2M S2N S2O S2P S2Q S2R S2S S2T S2U" /*2/-11*/
            /*3/-10*/ "S3A S3B S3C S3D S3E S3F S3G S3H S3I S3J S3K S3L S3M S3N S3O S3P S3Q S3R S3S S3T S3U" /*3/-10*/
            /*4 /-9*/ "G1A G1B G1C G1D G1E G1F G1G G1H G1I G1J G1K G1L G1M G1N G1O G1P G1Q G1R G1S G1T G1U" /*4 /-9*/
            /*5 /-8*/ "G2A G2B G2C G2D G2E G2F G2G G2H G2I G2J G2K G2L G2M G2N G2O G2P G2Q G2R G2S G2T G2U" /*5 /-8*/
            /*6 /-7*/ "G3A G3B G3C G3D G3E G3F G3G G3H G3I G3J G3K G3L G3M G3N G3O G3P G3Q G3R G3S G3T G3U" /*6 /-7*/
            /*7 /-6*/ "G4A G4B G4C G4D G4E G4F G4G G4H G4I G4J G4K G4L G4M G4N G4O G4P G4Q G4R G4S G4T G4U" /*7 /-6*/
            /*8 /-5*/ "G5A G5B G5C G5D G5E G5F G5G G5H G5I G5J G5K G5L G5M G5N G5O G5P G5Q G5R G5S G5T G5U" /*8 /-5*/
            /*9 /-4*/ "G6A G6B G6C G6D G6E G6F G6G G6H G6I G6J G6K G6L G6M G6N G6O G6P G6Q G6R G6S G6T G6U" /*9 /-4*/
            /*10/-3*/ "G7A G7B G7C G7D G7E G7F G7G G7H G7I G7J G7K G7L G7M G7N G7O G7P G7Q G7R G7S G7T G7U" /*10/-3*/
            /*11/-2*/ "G8A G8B G8C G8D G8E G8F G8G G8H G8I G8J G8K G8L G8M G8N G8O G8P G8Q G8R G8S G8T G8U" /*11/-2*/
            /*12/-1*/ "G9A G9B G9C G9D G9E G9F G9G G9H G9I G9J G9K G9L G9M G9N G9O G9P G9Q G9R G9S G9T G9U";/*12/-1*/
                     /*-21 -20 -19 -18 -17 -16 -15 -14 -13 -12 -11 -10  -9  -8  -7  -6  -5  -4  -3  -2  -1*/
  justify-items: center;
  align-items: center;
  pointer-events: none; /* clicks are ignored, to prevent blocking of nested scene grid animation clicks */
  perspective: 1300px;
  transform-style: preserve-3d;
}
#scene > section,
#scene > section > figure,
#scene > section > figure > .cube,
#scene > section > figure > .cuboid,
#scene > section > figure > .prism {
  transform-style: preserve-3d;
}
#scene .home.overflow { /*4 rows, 6 cols*/
  /* grid-row: 1 / 5;
  grid-column: 1 / 7; */
  /* grid-row: 9 / 13;
  grid-column: 1 / 7; */
  /* grid-row: G6A / G9A; 
  grid-column: G6A / G6F; */
  grid-row: G2E / G5E;
  grid-column: G2E / G2J;
  /* grid-row: S1A / G9A;
  grid-column: S1A / G1G; */
  /* background-color: yellow; */
  /* justify-self: start;
  align-self: end; */
  position: relative;
}
#scene #home1 {
  --base-size: calc(var(--grid-cell-length) * 1.5);
  --house-l: calc(var(--base-size) * 3.7);
  --house-w: calc(var(--base-size) * 2.5);
  --house-h: calc(var(--base-size) * 2);
  --window-size: calc(var(--base-size));
  /* position: absolute; */
  /* right:0; */
  /* right: calc(-1 * var(--window-size) * 1);
  top: calc(-1 * var(--window-size) * 1.3); */
  /* top: calc(-1 * var(--base-size)/2);
  height: var(--base-size);
  width: var(--base-size); */
  height: var(--house-h);
  width: var(--house-l);
}
#scene #home1 .plane {
  position: absolute;
  /* border: brown solid 1px; */
}
#scene #home1 .cuboid .wall.long {
  height: var(--house-h);
  width: var(--house-l);
}
#scene #home1 .cuboid .wall.short {
  height: var(--house-h);
  width: var(--house-w);
}
#scene #home1 .cuboid .floor {
  height: var(--house-w);
  width: var(--house-l);
}
#scene #home1 .cuboid .wall.left {
  transform-origin: left;
  transform: rotateY(90deg);
}
#scene #home1 .cuboid .wall.right {
  transform-origin: left;
  transform: rotateY(90deg) translateZ(var(--house-l));
  display: flex;
  flex-direction: column;
  justify-content: end;
}
/* #scene #home1 .cuboid .wall.right .door {
  height: 90%;
  background-image: url("../media/imgs/windows/door-575966_640.png");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: bottom center;
} */
#scene #home1 .cuboid .floor {
  transform-origin: top;
  transform: rotateX(-90deg) translateZ(calc(var(--house-h)));
  background-color: #433645;
}
#scene #home1 .cuboid .wall.back {
  transform: translateZ(calc(-1 * var(--house-w)));
  background-image: url("../media/imgs/interior/fireplace-4599325_flipped_s.png");
  background-size: contain;
  background-position: bottom left;
}
#scene #home1 .cuboid .brick {
  background-image: url("../media/imgs/tiles/bricks-8753855-alt_640.png");
  background-size: auto calc(var(--base-size));
  background-position: bottom;
}
#scene #home1 .cuboid .wall.front {
  display: grid;
  grid-template: "top  top  top  top  top  top  top"  1.5fr
                 "midL midL midL winL midC winR midR" var(--window-size)
                 "bot  bot  bot  bot  bot  bot  bot"  2fr / 1fr var(--window-size) 1fr var(--window-size) 2fr var(--window-size) 1fr;
}
#scene #home1 .cuboid .wall.front .top {
  grid-area: top;
}
#scene #home1 .cuboid .wall.front .bottom {
  grid-area: bot;
}
#scene #home1 .cuboid .wall.front .mid.left {
  grid-area: midL;
}
#scene #home1 .cuboid .wall.front .mid.centre {
  grid-area: midC;
}
#scene #home1 .cuboid .wall.front .mid.right {
  grid-area: midR;
}
/* #scene #home1 .cuboid .wall.front .mid {
} */
#scene #home1 .cuboid .wall.front .door {
  grid-row: 1 / -1;
  grid-column: 2 / 3;
  background-image: url("../media/imgs/windows/door-575966_edited.png");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: bottom center;
  z-index: 1;
}
#scene #home1 .cuboid .wall.front .window.left {
  grid-area: winL;
  background-image: url("../media/imgs/windows/window-frame-4036386_640.png");
  background-size: cover;
}
/* HOME1 WINDOW */
#scene #home1 .cuboid .wall.front .window.right {
  grid-area: winR;
  background-image: url("../media/imgs/windows/window-frame-lg-4036386_640.png");
  background-size: cover;
  /* position: relative;
  height: var(--window-size);
  width: var(--window-size);
  overflow: hidden; */
  --window-frame-outside: calc(var(--window-size) / 20);
  --window-frame-inside: calc(var(--window-size) / 25);
  display: grid;
  grid-template-rows: var(--window-frame-outside) var(--window-frame-inside) repeat(5, 1fr) var(--window-frame-inside) var(--window-frame-outside);
  grid-template-columns: var(--window-frame-outside) var(--window-frame-inside) repeat(5, 1fr) var(--window-frame-inside) var(--window-frame-outside);
}
#scene #home1 #tv {
  grid-row: 5 / 7;
  grid-column: -1 / -6;
  background-image: url("../media/imgs/objects/tv-675803_640.png");
  background-size: contain;
  background-repeat: no-repeat;
  z-index: -2;
}
#scene #home1 #balloon {
  grid-row: 3 / 5;
  grid-column: -1 / -5;
  background-image: url("../media/imgs/objects/balloon-red-heart-1169208_640.png");
  background-size: contain;
  background-repeat: no-repeat;
  z-index: -2;
}
#scene #home1 #postcard {
  grid-row: 4 / 5;
  grid-column: -5 / -6;
  background-image: url("../media/imgs/objects/postcard-front-9942094_640.png");
  background-size: contain;
  background-repeat: no-repeat;
  z-index: -2;
}
/* HOME1 WINDOW - TREE WITH SHAKING BAUBLES */
@keyframes tiltStem {
    30% {
        transform: rotateZ(-0.5deg);
    }
    60% {
        transform: rotateZ(0.2deg);
    }
    90% {
        transform: rotateZ(-0.1deg);
    }
}
@keyframes tiltBauble {
    30% {
        transform: translateZ(var(--z-offset)) rotateY(12deg) rotateX(-4deg) rotateZ(2deg);
    }
    60% {
        transform: translateZ(var(--z-offset)) rotateY(9deg) rotateX(2deg) rotateZ(-1deg);
    }
    90% {
        transform: translateZ(var(--z-offset)) rotateY(7deg) rotateX(-1deg);
    }
}
@keyframes scaleBauble {
    30% {
        transform: scale(0.95) translate(calc(var(--move-unit) * -14), calc(var(--move-unit) * -8));
    }
    60% {
        transform: scale(1.03) translate(calc(var(--move-unit) * 10), calc(var(--move-unit) * 5));
    }
    90% {
        transform: scale(0.99) translate(calc(var(--move-unit) * -0.5), calc(var(--move-unit) * -1.5));
    }
}
/* alt. direction fwd-left (nb. requires bauble tops' 6deg default rotation instead of -6deg): */
/* @keyframes tiltBauble {
    30% {
        transform: translateZ(var(--z-offset)) rotateY(-12deg) rotateX(4deg) rotateZ(2deg);
    }
    60% {
        transform: translateZ(var(--z-offset)) rotateY(-9deg) rotateX(-2deg) rotateZ(-1deg);
    }
    90% {
        transform: translateZ(var(--z-offset)) rotateY(-7deg) rotateX(1deg);
    }
}
@keyframes scaleBauble {
    30% {
        transform: scale(1.05) translate(calc(var(--move-unit) * -14), calc(var(--move-unit) * 8));
    }
    60% {
        transform: scale(0.97) translate(calc(var(--move-unit) * 10), calc(var(--move-unit) * -5));
    }
    90% {
        transform: scale(1.01) translate(calc(var(--move-unit) * -0.5), calc(var(--move-unit) * 1.5));
    }
} */
#scene #home1 #bauble-tree {
  grid-row: 2 / -2;
  grid-column: 2 / 6;
  z-index: -1;
  /* z-index: 99; */
  height: calc(var(--window-size) - var(--window-frame-outside)*2);
  /* width: auto; */
  aspect-ratio: 1 / 1.3954;
  /* width: calc(var(--window-size) - var(--window-frame-outside) * 2); */
  /* height: auto; */
  /* height: calc(var(--window-size) - var(--window-size) / 20 * 2); */
  /* width: 100%; */
  /* height: calc(var(--window-width) * 1.3954);
  width: var(--window-width); */
    /* --width: 440px;
    --height: calc(var(--width) * 1.3954); */
    /* --frame-width: calc(var(--width) / 20); */
  --bauble-width: calc(var(--window-size)/1.3954 / 7 * var(--bauble-size-factor,1));
    --move-unit: calc(var(--bauble-width) / 320);
    --animation-speed1: 1s ease-in-out both;
    --animation-speed2: 0.9s 0.1s ease-in-out both;
    --grid-span: 20;
    /* width: var(--height); */
    /* display: grid;
    grid-template-rows: calc(var(--frame-width)/2) auto calc(var(--frame-width)/2);
    grid-template-columns: calc(var(--frame-width)/2) auto calc(var(--frame-width)/2); */
    transform-style: preserve-3d;
}
/* #scene #home1 #bauble-tree .frame {
    grid-area: 1 / 1 / -1 / -1;
    border: var(--frame-width) solid #483C32;
    z-index: 1;
} */
#scene #home1 #bauble-tree .canvas {
    /* grid-area: 2 / 2 / -2 / -2; */
    width: 100%;
    height: 100%;
    background-image: url("../media/imgs/trees/fir-trees-6578788_640.png");
    background-size: cover;
    background-position: bottom;
    transform-origin: bottom left;
    display: grid;
    grid-template-rows: repeat(100, 1fr);
    grid-template-columns: repeat(100, 1fr);
    justify-items: center;
}
#scene #home1 #bauble-tree #bauble-red  { --hanging-point-col: 37; --hanging-point-row: 2;  }
#scene #home1 #bauble-tree #bauble-blue { --hanging-point-col: 18; --hanging-point-row: 15; }
#scene #home1 #bauble-tree #bauble-prpl { --hanging-point-col: 50; --hanging-point-row: 32; }
#scene #home1 #bauble-tree #bauble-turq { --hanging-point-col: 23; --hanging-point-row: 54; }
#scene #home1 #bauble-tree #bauble-gold { --hanging-point-col: 52; --hanging-point-row: 54; }
#scene #home1 #bauble-tree #bauble-indg { --hanging-point-col: 78; --hanging-point-row: 66; }
#scene #home1 #bauble-tree #bauble-pink { --hanging-point-col: 30; --hanging-point-row: 82;
}
#scene #home1 #bauble-tree .bauble {
    grid-row: var(--hanging-point-row, 50) / span var(--grid-span);
    grid-column: calc(var(--hanging-point-col, 50) - var(--grid-span)/2) / span var(--grid-span);
    width: calc(var(--window-size)/1.3954 / 7 * var(--bauble-size-factor,1)); /* used in many calculations below, but cannot be saved into a variable as too many substitutions lead to browser time out before calculation is completed */
    height: calc(var(--window-size)/1.3954/7*var(--bauble-size-factor,1) + var(--window-size)/1.3954/7*var(--bauble-size-factor,1)*230/320 - var(--window-size)/1.3954/7*var(--bauble-size-factor,1)*0.034226); /*= sphere-height + bauble-top-height - overlap (all based on bauble width) */
    perspective: 300px; /* for depth illusion */
    transform-style: preserve-3d;
    position: relative;
}
#scene #home1 #bauble-tree .bauble.s  { --bauble-size-factor: 0.9; }
#scene #home1 #bauble-tree .bauble.m  { --bauble-size-factor: 1;   }
#scene #home1 #bauble-tree .bauble.l  { --bauble-size-factor: 1.1; }
#scene #home1 #bauble-tree .bauble.xl { --bauble-size-factor: 1.2;
}
#scene #home1 #bauble-tree .bauble-part {
    position: absolute;
    width: 100%;
    background-size: contain;
    background-repeat: no-repeat;
    transform-style: preserve-3d;
}
#scene #home1 #bauble-tree .top {
    --z-offset: calc(var(--window-size)/1.3954/7*var(--bauble-size-factor,1) * 0.07); /* z-offset/translateZ as z-index doesn't work when there's perspective */
    transform: rotateY(-6deg) translateZ(var(--z-offset)); /* for alt. direction change to 6deg */
    height: calc(var(--window-size)/1.3954/7*var(--bauble-size-factor,1) * 230/320);
    transform-origin: top center;
}
#scene #home1 #bauble-tree .sphere {
    bottom: 0;
    background-position: bottom; /* this plus following properties together clip the image into a perfect sphere */
    height: calc(var(--window-size)/1.3954 / 7 * var(--bauble-size-factor,1)); /* same as bauble width */
    border-radius: 50%; /* circle shape */
}
#scene #home1 #bauble-tree #bauble-red  .top    { background-image: url(../media/imgs/baubles/bauble-1814941_640_top.png); }
#scene #home1 #bauble-tree #bauble-red  .sphere { background-image: url(../media/imgs/baubles/bauble-1814941_640_bottom.png); }
#scene #home1 #bauble-tree #bauble-blue .top    { background-image: url(../media/imgs/baubles/bauble-1814972_640_top.png); }
#scene #home1 #bauble-tree #bauble-blue .sphere { background-image: url(../media/imgs/baubles/bauble-1814972_640_bottom.png); }
#scene #home1 #bauble-tree #bauble-prpl .top    { background-image: url(../media/imgs/baubles/bauble-1814937_640_top.png); }
#scene #home1 #bauble-tree #bauble-prpl .sphere { background-image: url(../media/imgs/baubles/bauble-1814937_640_bottom.png); }
#scene #home1 #bauble-tree #bauble-turq .top    { background-image: url(../media/imgs/baubles/bauble-1814977_640_top.png); }
#scene #home1 #bauble-tree #bauble-turq .sphere { background-image: url(../media/imgs/baubles/bauble-1814977_640_bottom.png); }
#scene #home1 #bauble-tree #bauble-gold .top    { background-image: url(../media/imgs/baubles/bauble-1814949_640_top.png); }
#scene #home1 #bauble-tree #bauble-gold .sphere { background-image: url(../media/imgs/baubles/bauble-1814949_640_bottom.png); }
#scene #home1 #bauble-tree #bauble-indg .top    { background-image: url(../media/imgs/baubles/bauble-1814951_640_top.png); }
#scene #home1 #bauble-tree #bauble-indg .sphere { background-image: url(../media/imgs/baubles/bauble-1814951_640_bottom.png); }
#scene #home1 #bauble-tree #bauble-pink .top    { background-image: url(../media/imgs/baubles/bauble-1814943_640_top.png); }
#scene #home1 #bauble-tree #bauble-pink .sphere { background-image: url(../media/imgs/baubles/bauble-1814943_640_bottom.png);
}
#scene #home1 #bauble-tree .animateTree {
    animation: tiltStem var(--animation-speed1);
}
#scene #home1 #bauble-tree .free .animateFreeBaubleTop {
    animation: tiltBauble var(--animation-speed1);
}
#scene #home1 #bauble-tree .free .animateFreeBaubleSphere {
    animation: scaleBauble var(--animation-speed1);
}
#scene #home1 #bauble-tree .constricted .animateConstrictedBaubleTop {
    animation: tiltBauble var(--animation-speed2);
}
#scene #home1 #bauble-tree .constricted .animateConstrictedBaubleSphere {
    animation: scaleBauble var(--animation-speed2);
}

/* HOME1 WINDOW - CARTOON CANDLE PAIR, ONE BLOWING OUT THE OTHER */
/* Adapted from original creation by Kevin David, example #36 at https://prismic.io/blog/css-animation-examples */
@keyframes openEyes {
  0%,100% { opacity: 0; }
  5%,95%  { opacity: 1; }
}
@keyframes blink-eyes {
  0%,35%  { opacity: 1; transform: translate(-70%,  0%); }
  36%,39% { opacity: 0; transform: translate(-70%,  0%); }
  40%     { opacity: 1; transform: translate(-70%,  0%); }
  50%,65% {             transform: translate(-140%, 0%); }
  66%     {             transform: translate(-70%,  0%); }
}
@keyframes expand-body {
  0%,40%  { transform: scale(1,    1)    translate(60%, -25%); }
  45%,55% { transform: scale(1.1,  1.1)  translate(60%, -28%); }
  60%     { transform: scale(0.89, 0.89) translate(60%, -25%); }
  65%     { transform: scale(1,    1)    translate(60%, -25%); }
  70%     { transform: scale(0.95, 0.95) translate(60%, -25%); }
  75%     { transform: scale(1,    1)    translate(60%, -25%); }
}
@keyframes uff {
  0%,40%  { width: 0px;                         height: 0px; }
  50%,54% { width: calc(var(--base-size)*3/10); height: calc(var(--base-size)*3/10); left: 30%; }
  59%     { width: calc(var(--base-size)/10);   height: calc(var(--base-size)/10);   left: 20%; }
  62%     { width: calc(var(--base-size)/25);   height: calc(var(--base-size)/25);   left: 20%; }
  67%     { width: 0px;                         height: 0px;                         left: 30%; }
}
@keyframes change-background {
  0%,59%,98%,100% { background: transparent; }
  61%,97%         { background: #000; }
}
@keyframes move-left {
  0%,59%,100% { opacity: 1; width: 0px;                        left: 10%; }
  60%         { opacity: 1; width: calc(var(--base-size)*3/5); left: 0%; }
  68%         { opacity: 1; width: 0px;                        left: -10%; }
}
@keyframes move-top {
  0%,64%,100% { opacity: 1; width: 0px;                      height: 0px;                      top: -80%; }
  65%         { opacity: 1; width: calc(var(--base-size)/5); height: calc(var(--base-size)/5); top: -40%; left: 35%; }
  80%         { opacity: 1; width: 0px;                      height: 0px;                      top: -60%; }
}
@keyframes shake-left {
  0%,40%  { left: -10%; transform: translate(60%, -15%); }
  50%,54% { left: -10%; transform: translate(60%, -15%); }
  59%     { left: -10%; transform: translate(60%, -15%); }
  62%     { left: -12%; transform: translate(60%, -15%); }
  65%     { left: -11%; transform: translate(60%, -15%); }
  67%     { left: -10%; transform: translate(60%, -15%); }
  74%     { left: -10%; transform: translate(60%, -15%);
                         background: var(--candle-colour-gradient); border-color: #673C63; }
  75%     { left: -10%; transform: scale(1.15, 0.85) translate(60%, -15%);
                         background: #fff;                        border-color: #673C63; }
  91%     { left: -10%; transform: scale(1.18, 0.82) translate(60%, -10%);
                         background: #F44336;                     border-color: #F44336; box-shadow: calc(var(--base-size)/25*-1) 0px 0px #F44336 inset; }
  92%     { left: -10%; transform: scale(0.85, 1.15) translate(60%, -15%);
                         background: #fff;                        border-color: #673C63; }
  93%     { left: -10%; transform: scale(0.85, 1.15) translate(60%, -15%);
                         background: var(--candle-colour-gradient); border-color: #673C63; }
  95%     { left: -10%; transform: scale(1.05, 0.95) translate(60%, -15%); }
  97%     { left: -10%; transform: scale(1, 1) translate(60%, -15%); }
}
@keyframes stick-animation {
  0%,40%  { left: 50%; top: 0%; transform:                 translate(-50%, -100%); }
  50%,54% { left: 50%; top: 0%; transform:                 translate(-50%, -100%); }
  59%     { left: 50%; top: 0%; transform:                 translate(-50%, -100%); }
  62%     { left: 50%; top: 0%; transform: rotateZ(-15deg) translate(-50%, -100%); }
  65%     { left: 50%; top: 0%; transform: rotateZ(15deg)  translate(-50%, -100%); }
  70%     { left: 50%; top: 0%; transform: rotateZ(-5deg)  translate(-50%, -100%); }
  72%     { left: 50%; top: 0%; transform: rotateZ(5deg)   translate(-50%, -100%); }
  74%,84% { left: 50%; top: 0%; transform: rotateZ(0deg)   translate(-50%, -100%); }
  85%     {                     transform: rotateZ(180deg) translate(  0%,  120%); }
  92%     { left: 50%; top: 0%; transform:                 translate(-50%, -100%); }
}
@keyframes dance-fire {
  59%,89%                            { left: 55%;   width: 0px;                          height: 0px; }
  90%,0%,7%,15%,23%,31%,39%,47%,55%  { left: 55.8%; width: calc(var(--base-size)/50*17); height: calc(var(--base-size)*2/5);
                                       background: #FFC107; }
  94%,3%,11%,19%,27%,35%,43%,51%,58% { left: 56.2%; width: calc(var(--base-size)/50*17); height: calc(var(--base-size)*2/5);
                                       background: #FF9800; }
}
@keyframes changeto-lower {
  0%,70%,90% { display: inline-block;
               background: #673C63; padding: 0px;
               border: 0px solid #673C63; border-radius: 100%; border-width: 0 0 0 0;
               transform: translate(-90%, 0%); }
  71%,89%    { display: inline-block; float: left;
               background: none;      padding: calc(var(--base-size)/50);
               border: solid #673C63;     border-radius: 0px;  border-width: 0 calc(var(--base-size)/25) calc(var(--base-size)/25) 0;
               transform: rotate(-45deg) translate(-50%, -65%); transform-origin: bottom left;
               -webkit-transform: rotate(-45deg) translate(-50%, -65%); }
}
@keyframes changeto-greater {
  0%,70%,90% { display: inline-block;
               top: 50%;
               background: #673C63; padding: 0px;
               border: 0px solid #673C63; border-radius: 100%; border-width: 0 0 0 0;
               transform: translate(-80%, 0%); }
  71%,89%    { display: inline-block; float: left;
               top: 40%;
               background: none;      padding: calc(var(--base-size)/50);
               border: solid #673C63;     border-radius: 0px;  border-width: 0 calc(var(--base-size)/25) calc(var(--base-size)/25) 0;
               transform: rotate(135deg) translate(-80%, 20%); transform-origin: bottom left;
               -webkit-transform: rotate(135deg) translate(-80%, 20%); }
}
#scene #home1 #candles-pair {
  --base-size: calc(var(--window-size) / 6.6);
  --candle-colour-gradient: linear-gradient(90deg, rgb(235,235,235), #fff, #fff, rgb(225,225,225));
  --animation-speed: 3s linear;
  --animation-speed2: 3.5s linear;
  grid-row: -2 / -5;
  grid-column: -3 / -5;
  /* background-color:rgba(200, 200, 0, 0.6); */
  /* animation: change-background var(--animation-speed); */
}
#scene #home1 #candles-pair .wrapper {
  width: 100%;
  height: 100%;
  position: relative;
  /* z-index: 99; */
  /* background-color:rgba(100, 100, 0, 0.6); */
}
#scene #home1 #candles-pair .candle {
  background: var(--candle-colour-gradient);
}
#scene #home1 #candles-pair .candle1 {
  position: absolute;
  left: 40%;
  top: 33%;
  width: calc(var(--base-size) / 10 * 8.1);
  height: calc(var(--base-size) * 2.1);
  /* border: calc(var(--base-size) / 50 * 3) solid #673C63; */
  border-bottom: 0px;
  border-radius: calc(var(--base-size) / 50 * 3);
  transform-origin: center right;
  transform: translate(60%, -25%);
  box-shadow: calc(var(--base-size) / 50 * -2) 0px 0px #95c6f2 inset;
}
#scene #home1 #candles-pair .candle1__stick,
#scene #home1 #candles-pair .candle2__stick {
  position: absolute;
  left: 52%;
  top: 1%;
  width: calc(var(--base-size) / 50 * 3);
  height: calc(var(--base-size) / 10 * 3);
  background: #673C63;
  border-radius: calc(var(--base-size) / 50 * 8);
  transform: translate(-50%, -100%);
}
#scene #home1 #candles-pair .candle2__stick {
  height: calc(var(--base-size) / 50 * 12);
  transform-origin: bottom center;
}
#scene #home1 #candles-pair .eye {
  opacity: 0;
}
#scene #home1 #candles-pair .candle1__eyes,
#scene #home1 #candles-pair .candle2__eyes {
  position: absolute;
  left: 50%;
  top: 0%;
  width: calc(var(--base-size) / 10 * 7);
  height: calc(var(--base-size) / 5 * 8);
  transform: translate(-50%, 0%);
}
#scene #home1 #candles-pair .tall-candle-eye {
  position: absolute;
  top: 20%;
  width: calc(var(--base-size) / 10);
  height: calc(var(--base-size) / 10);
  background: #673C63;
  border-radius: 50%;
  transform: translate(-70%, 0%);
}
#scene #home1 #candles-pair .candle1__eyes-one {
  left: 30%;
}
#scene #home1 #candles-pair .candle1__eyes-two {
  left: 70%;
}
#scene #home1 #candles-pair .candle1__mouth {
  position: absolute;
  left: 40%;
  top: 30%;
  width: 0px;
  height: 0px;
  border-radius: calc(var(--base-size) / 5 * 2);
  background: #673C63;
  transform: translate(-50%, -50%);
}
#scene #home1 #candles-pair .candle2 {
  position: absolute;
  left: -10%;
  top: 54%;
  width: calc(var(--base-size) / 50 * 42.3);
  height: calc(var(--base-size) / 5 * 6.1);
  /* border: calc(var(--base-size) / 50 * 3) solid #673C63; */
  border-bottom: 0px;
  border-radius: calc(var(--base-size) / 50 * 3);
  transform: translate(60%, -15%);
  transform-origin: center right;
  box-shadow: calc(var(--base-size) / 50 * -2) 0px 0px #95c6f2 inset;
}
#scene #home1 #candles-pair .candle2__eyes-one {
  position: absolute;
  left: 30%;
  top: 50%;
  width: calc(var(--base-size) / 10);
  height: calc(var(--base-size) / 10);
  /* display: inline-block; */
  border: 0px solid #673C63;
  border-radius: 50%;
  float: left;
  background: #673C63;
  transform: translate(-80%, 0%);
}
#scene #home1 #candles-pair .candle2__eyes-two {
  position: absolute;
  left: 70%;
  top: 50%;
  width: calc(var(--base-size) / 10);
  height: calc(var(--base-size) / 10);
  /* display: inline-block; */
  border: 0px solid #673C63;
  border-radius: 50%;
  float: left;
  background: #673C63;
  transform: translate(-80%, 0%);
}
#scene #home1 #candles-pair .candle2__fire {
  position: absolute;
  top: -30%;
  /* top: 34%; */
  left: 53%;
  display: block;
  width: calc(var(--base-size) / 50 * 16);
  height: calc(var(--base-size) / 5 * 1.9);
  background-color: red;
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  background: #FF9800;
  transform: translate(-50%, -50%);
}
#scene #home1 #candles-pair .smoke {
  position: absolute;
  left: 30%;
  transform: translate(-50%, -50%);
  background: grey;
  opacity: 0;
}
#scene #home1 #candles-pair .candle__smoke-one {
  top: -30%;
  width: calc(var(--base-size) / 5 * 3);
  height: calc(var(--base-size) / 50 * 3);
}
#scene #home1 #candles-pair .candle__smoke-two {
  top: -50%;
  width: calc(var(--base-size) / 5);
  height: calc(var(--base-size) / 5);
  border-radius: calc(var(--base-size) / 5);
}
/* #scene #home1 #candles-pair .animateCandleEyes {
  animation: openEyes var(--animation-speed);
} */
#scene #home1 #candles-pair .animateTallCandleBody {
  animation: expand-body var(--animation-speed);
  /* animation: expand-body var(--animation-speed) both; */
}
#scene #home1 #candles-pair .animateTallCandleEyes {
  animation: openEyes var(--animation-speed2),
             blink-eyes var(--animation-speed);
}
#scene #home1 #candles-pair .animateTallCandleMouth {
  animation: uff var(--animation-speed);
}
#scene #home1 #candles-pair .animateShortCandleBody {
  animation: shake-left var(--animation-speed);
}
#scene #home1 #candles-pair .animateShortCandleEye1 {
  animation: openEyes var(--animation-speed2),
             changeto-lower var(--animation-speed);
}
#scene #home1 #candles-pair .animateShortCandleEye2 {
  animation: openEyes var(--animation-speed2),
             changeto-greater var(--animation-speed);
}
#scene #home1 #candles-pair .animateShortCandleStick {
  animation: stick-animation var(--animation-speed);
}
#scene #home1 #candles-pair .animateShortCandleFire {
  animation: dance-fire var(--animation-speed);
}
#scene #home1 #candles-pair .animateShortCandleSmoke1 {
  animation: move-left var(--animation-speed);
}
#scene #home1 #candles-pair .animateShortCandleSmoke2 {
  animation: move-top var(--animation-speed);
}

@keyframes highlightTodaysAnimation {
  0%, 80%, 100% {
    border-radius: 50%;
    box-shadow: none;
  }
  20%, 60% {
    border-radius: 50%;
    box-shadow: 0px 5px 20px 10px rgba(165, 39, 255, 1);
  }
  40% {
    border-radius: 50%;
    box-shadow: 0px 5px 20px 10px orange;
  }
}
.animateTodaysAnimation {
  animation: highlightTodaysAnimation 3.5s ease-in;
}