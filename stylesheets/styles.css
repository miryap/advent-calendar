:root {
  --sky-col: lightblue;
  --sky-grad-col: #E7F4F8;
  --ground-col: antiquewhite;
  --ground-grad-col: #FEF9F3;
  --grid-sky-row-num: 3;
  --grid-ground-row-num: 9;
  --grid-row-num: calc(var(--grid-sky-row-num) + var(--grid-ground-row-num));
  --grid-col-num: 21; /* letters A-U */
  --grid-cell-length: min(calc(100vh/var(--grid-row-num, 12)), calc(100vw/var(--grid-col-num, 21)));
}

html, body {
  height: 100%;
  overflow: hidden; /* stop page-level scrolling entirely */
}

#viewport { /* acts as the scene camera, for panning and zooming */
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;       /* crops during zooms */
  /* transform-origin: center center; */
  transform-origin: top left;
  transition: transform 2s ease-in-out;
  will-change: transform; /* use GPU memory to create own rendering layer for improved zooming & panning transitions (where frame rate matters) i.e. reduced blurring/flicker, no intermediate re-layouts, etc - ONLY USE ON ELEMENTS WITH LOTS OF CHANGES ELSE WOULD WASTE GPU MEMORY */
  perspective: 1000px;    /* optional for depth */
  display: grid;
  grid-template: "window-size" 1fr / 1fr;
}

/* *********************************** */
/* OVERARCHING GRIDS & SCENE PLACEMENT */
/* *********************************** */

#bg-colours-grid,
#placement-grid {
  grid-area: window-size;
  /* These grids define:
   - the centre area vs extended background when window is taller or wider than the central area, i.e.
      grid-template-areas: "bg  bg  bg"
                           "bg main bg"
                           "bg main bg"
                           "bg  bg  bg";
     (nb. .top.left / .top.right / .bottom.left / .bottom.right are now redundant but were originally meant to show on super tall/wide screens)
   - the sky vs ground bg-colours, i.e.
      grid-template-areas: " sky    sky    sky"
                           " sky    sky    sky"
                           "ground ground ground"
                           "ground ground ground";
  */
  min-height: calc(var(--grid-row-num) * var(--grid-cell-length)); /*500px /*150vh*/;
  min-width: calc(var(--grid-col-num) * var(--grid-cell-length)); /*500px /*150vw*/;
  display: grid;
  grid-template-rows: 1fr calc(var(--grid-sky-row-num)*var(--grid-cell-length)) calc(var(--grid-ground-row-num)*var(--grid-cell-length)) 1fr; /*nb for #placement-grid, this would've been sufficient: calc(var(--grid-row-num)*var(--grid-cell-length)) */
  grid-template-columns: 1fr calc(var(--grid-col-num)*var(--grid-cell-length)) 1fr;
  /* grid-template-rows: 1fr 0.5fr 1.5fr 1fr;
  grid-template-columns: 1fr 2fr 1fr; */
}
#bg-colours-grid .top { grid-row: 1 / 2; }
#bg-colours-grid .sky.v-centre { grid-row: 2 / 3; }
#bg-colours-grid .ground.v-centre { grid-row: -2 / -3; }
#bg-colours-grid .bottom { grid-row: -1 / -2; }
#bg-colours-grid .left { grid-column: 1 / 2; }
#bg-colours-grid .h-centre { grid-column: 2 / -2; }
#bg-colours-grid .right { grid-column: -1 / -2; }
/* #bg-colours-grid .sky { grid-row: 1 / 3; }
#bg-colours-grid .ground { grid-row: -1 / -3; } */

#bg-colours-grid > main.sky {
  background-color: var(--sky-col);
}
#bg-colours-grid > .sky.v-centre.left {
  background: linear-gradient(270deg, var(--sky-col), var(--sky-grad-col));
}
#bg-colours-grid > .sky.v-centre.right {
  background: linear-gradient(90deg, var(--sky-col), var(--sky-grad-col));
}
#bg-colours-grid > .sky.top.h-centre {
  background: linear-gradient(0deg, var(--sky-col), var(--sky-grad-col));
}
/* #bg-colours-grid > .sky.top.left {
  background: radial-gradient(ellipse at 100% 100%, var(--sky-col), white);
}
#bg-colours-grid > .sky.top.right {
  background: radial-gradient(ellipse at 0% 100%, var(--sky-col), white);
} */
#bg-colours-grid > main.ground {
  background-color: var(--ground-col);
}
#bg-colours-grid > .ground.v-centre.left {
  background: linear-gradient(270deg, var(--ground-col), var(--ground-grad-col));
}
#bg-colours-grid > .ground.v-centre.right {
  background: linear-gradient(90deg, var(--ground-col), var(--ground-grad-col));
}
#bg-colours-grid > .ground.bottom.h-centre {
  background: linear-gradient(180deg, var(--ground-col), var(--ground-grad-col));
}
/* #bg-colours-grid > .ground.bottom.left {
  background: radial-gradient(ellipse at 100% 0%, var(--ground-col), white);
}
#bg-colours-grid > .ground.bottom.right {
  background: radial-gradient(ellipse at 0% 0%, var(--ground-col), white);
} */

#placement-grid > #day-numbers {
  grid-area: 2 / 2 / -2 / -2;
  /* This (centre area only) grid defines:
   - the advent calendar day 1~25 assigned per animation
   - each day uses the same bell background image for clarity (can be toggled off in menu to only see the number)
  */
  display: grid;
  grid-template-rows: repeat(18, 1fr); /* divides each #scene cell into 4 cells, for more accurate placement */
  grid-template-columns: repeat(52, 1fr);
  justify-items: center; /* default, to be adjusted as needed per number bell */
  align-items: center;
  z-index: 10; /* only affects visual stacking, not clicks */
  pointer-events: none; /* clicks are ignored, to prevent blocking of scene grid animation clicks */
}
#day-numbers > .bell {
  grid-area: 1 / 1 / -1 / -1; /* temporary default to prevent any skewing of grid track sizes as new days are added (before their actual area is assigned) */
  background-image: url(../media/imgs/day-number/bell-152195_squashed.png);
  background-size: contain;
  background-repeat: no-repeat;
  width: 1.7rem;
  height: 1.7rem; /* alt. ~2.5rem (equiv. 1.75rem) */
  font-size: 0.75rem; /* with 1rem default*/
  font-style: italic;
  font-family: 'Times New Roman', Times, serif;
  display: flex; /* centres the number in middle of bell image */
  justify-content: center;
  align-items: center;
}
/* #day-numbers > #day1 {
} */

#placement-grid > #day-numbers > .bell,
#placement-grid > main#scene .clickable {
  pointer-events: auto; /* regain clickability */
}

#placement-grid > main#scene {
  grid-area: 2 / 2 / -2 / -2;
  /* This (centre area only) grid defines:
   - all animations and contextual images (grouped into sections by in-scene location)
   - the perspective of the scene overall
  */
  /* border: 2px dotted red; */
  display: grid;
  grid-template-rows: repeat(var(--grid-row-num, 12), var(--grid-cell-length));
  grid-template-columns: repeat(var(--grid-col-num, 21), var(--grid-cell-length));
  grid-template-areas:/*1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20  21 */
            /*1/-12*/ "S1A S1B S1C S1D S1E S1F S1G S1H S1I S1J S1K S1L S1M S1N S1O S1P S1Q S1R S1S S1T S1U" /*1/-12*/
            /*2/-11*/ "S2A S2B S2C S2D S2E S2F S2G S2H S2I S2J S2K S2L S2M S2N S2O S2P S2Q S2R S2S S2T S2U" /*2/-11*/
            /*3/-10*/ "S3A S3B S3C S3D S3E S3F S3G S3H S3I S3J S3K S3L S3M S3N S3O S3P S3Q S3R S3S S3T S3U" /*3/-10*/
            /*4 /-9*/ "G1A G1B G1C G1D G1E G1F G1G G1H G1I G1J G1K G1L G1M G1N G1O G1P G1Q G1R G1S G1T G1U" /*4 /-9*/
            /*5 /-8*/ "G2A G2B G2C G2D G2E G2F G2G G2H G2I G2J G2K G2L G2M G2N G2O G2P G2Q G2R G2S G2T G2U" /*5 /-8*/
            /*6 /-7*/ "G3A G3B G3C G3D G3E G3F G3G G3H G3I G3J G3K G3L G3M G3N G3O G3P G3Q G3R G3S G3T G3U" /*6 /-7*/
            /*7 /-6*/ "G4A G4B G4C G4D G4E G4F G4G G4H G4I G4J G4K G4L G4M G4N G4O G4P G4Q G4R G4S G4T G4U" /*7 /-6*/
            /*8 /-5*/ "G5A G5B G5C G5D G5E G5F G5G G5H G5I G5J G5K G5L G5M G5N G5O G5P G5Q G5R G5S G5T G5U" /*8 /-5*/
            /*9 /-4*/ "G6A G6B G6C G6D G6E G6F G6G G6H G6I G6J G6K G6L G6M G6N G6O G6P G6Q G6R G6S G6T G6U" /*9 /-4*/
            /*10/-3*/ "G7A G7B G7C G7D G7E G7F G7G G7H G7I G7J G7K G7L G7M G7N G7O G7P G7Q G7R G7S G7T G7U" /*10/-3*/
            /*11/-2*/ "G8A G8B G8C G8D G8E G8F G8G G8H G8I G8J G8K G8L G8M G8N G8O G8P G8Q G8R G8S G8T G8U" /*11/-2*/
            /*12/-1*/ "G9A G9B G9C G9D G9E G9F G9G G9H G9I G9J G9K G9L G9M G9N G9O G9P G9Q G9R G9S G9T G9U";/*12/-1*/
                     /*-21 -20 -19 -18 -17 -16 -15 -14 -13 -12 -11 -10  -9  -8  -7  -6  -5  -4  -3  -2  -1*/
  justify-items: center;
  align-items: center;
  pointer-events: none; /* clicks are ignored, to prevent blocking of nested scene grid animation clicks */
  perspective: 1000px;
  transform-style: preserve-3d;
}
#scene #secHme1 { grid-area: G4B / G4B / G7B / G4G;
              /*G7G, 4 rows 6 cols, 3rd shared version (with only 3 sections defined) */
  /* grid-area: G6A / G6A / G6A / G9F; */
                           /*G9F, 4 rows 6 cols, TBC NEW VERSION */
  /* grid-area: G6A / G6A / G9A / G6F; */
              /*G9F, 4 rows 6 cols, pre-sharing*/
  /* grid-area: G2E / G2E / G5E / G2J; */
              /*G5J, 4 rows 6 cols, 1st shared version (without roof) */ 
  /* grid-area: S3D / S3D / G4D / S3I;
              /*G4I, 5 rows 6 cols, 2nd shared version (b4 adding home3) */
  /* grid-area: G4B / G4B / G7B / G4G;
              /*G7G, 4 rows 6 cols, 3rd shared version (with only 3 sections defined) */
  /* transform: translateZ(200px); */
  /*IMPORTANT - seems like only minus Z-translate values are accepted for clickability*/
}
#scene #secHme2 {}
#scene #secHme3 { grid-area: S3D / S3D / G4D / S3I;
              /*G4I, 5 rows 6 cols, 1st shared version (with only 3 sections defined) */
  /* grid-area: G6A / G6A / G6A / G9F; TEST(same coordinates as home#1) */
  /* G3D / G3D / G6D / G3H; */
                           /*G6H, 4 rows 5 cols, TBC NEW VERSION */
  /* grid-area: S3D / S3D / G4D / S3I;
              /*G4I, 5 rows 6 cols, 1st shared version (with only 3 sections defined) */
  transform: translateZ(-350px);
  /* transform: translateZ(var(--distance-from-home1)); */
}
#scene #secHme4 {}
#scene #secHme5 { grid-area: S3A / S3A / G2A / S3E;
                           /*G2E, 3 rows 5 cols */
  transform: translateZ(-400px);
}
#scene #secShop { grid-area: G5P / G5P / G9P / G5U;
                           /*G9U, 5 rows 6 cols */ 
  background-color: rgb(100,250,0,0.3);
  width: 100%;
  height: 100%;
}
#scene #secOuts1 {}
#scene #secOuts2 {}
#scene #secOuts3 { grid-area: G2H / G2H / G6H / G2L;
                            /*G6L, 4 rows 5 cols */
  transform: translateZ(-100px);
}
#scene #secOuts4 { grid-area: S3A / S3A / G2A / S3C;
                            /*G2C, 3 rows 3 cols */
  /* grid-area: S3P / S3P / G3P / S3U;
                            /*G3U, 4 rows 6 cols */
  transform: translateZ(-450px);
}
#scene #secOuts5 { grid-area: S2H / S2H / G1H / S2O;
                            /*G1O, 3 rows 8 cols */
  transform: translateZ(-750px);
}
#scene #secSky {}

/* **************************** */
/* BUILDINGS & SCENE CONTAINERS */
/* **************************** */

#scene #secOuts3 {
  display: grid;
  grid-template-rows: repeat(10, 1fr);
  grid-template-columns: repeat(10, 1fr);
}
#scene #secOuts4 {
  /* background-color: rgb(100,250,0,0.3); */
  height: 100%;
  width: 100%;
  display: grid;
  grid-template-rows: repeat(9, 1fr);
  grid-template-columns: repeat(9, 1fr);
}
#scene #secOuts4 #sledging-hill {
  --moveBy: calc(var(--grid-cell-length)*0.2);
  --animation-speed: 10s linear 3;
  grid-row: 1 / 5;
  grid-column: 1 / -1;
  background-image: url('../media/imgs/houses/snow-hills.png');
  position: relative;
}
#scene #secOuts4 #sledging-hill,
#scene #secOuts4 #sledging-hill .child,
#scene #secOuts4 #sledging-hill .sledge {
  background-size: contain;
  background-repeat: no-repeat;
}
#scene #secOuts4 #sledging-hill div {
  height: 50%;
  width: 30%;
}
#scene #secOuts4 #sledging-hill .child-n-sledge {
  position: absolute;
  display: flex;
}
#scene #secOuts4 #sledging-hill .child-n-sledge.walking .sledge {
  margin-top: calc(var(--grid-cell-length) * 0.15); /* alt. align-items: end; doesn't work :( */
}
#scene #secOuts4 #sledging-hill .child-n-sledge.sliding {
  top: calc(var(--grid-cell-length) * 0.15);
  left: calc(var(--grid-cell-length) * 0.95);
  width: 40%;
}
#scene #secOuts4 #sledging-hill .child-n-sledge.walking.leftwards {
  top: calc(var(--grid-cell-length) * 0.9);
  right: calc(var(--grid-cell-length) * 0.1);
  opacity: 0;
}
#scene #secOuts4 #sledging-hill .child-n-sledge.walking.rightwards {
  top: calc(var(--grid-cell-length) * 0.6);
  left: calc(var(--grid-cell-length) * -0.1);
  opacity: 0;
}
#scene #secOuts4 #sledging-hill .sliding .child.sledge {
  background-image: url('../media/imgs/people/child-sleighing.png');
}
#scene #secOuts4 #sledging-hill .walking.leftwards .child {
  background-image: url('../media/imgs/people/child-walking_2L.png');
}
#scene #secOuts4 #sledging-hill .walking.leftwards .sledge {
  background-image: url('../media/imgs/objects/sledge_transparent_facingL.png');
}
#scene #secOuts4 #sledging-hill .walking.rightwards .child {
  background-image: url('../media/imgs/people/child-walking_2R.png');
}
#scene #secOuts4 #sledging-hill .walking.rightwards .sledge {
  background-image: url('../media/imgs/objects/sledge_transparent_facingR.png');
  transform: rotateZ(-20deg);
  margin-top: calc(var(--grid-cell-length) * 0.25);
}
@keyframes slideDown {
  0% { opacity: 1; transform: translate(0, 0); }
  2.4%/*20%*/ { opacity: 1; transform: translate(calc(1*var(--moveBy)), calc(1*var(--moveBy))); }
  4.2%/*35%*/ { opacity: 1; transform: translate(calc(2*var(--moveBy)), calc(1.8*var(--moveBy))); }
  7.2%/*60%*/ { opacity: 1; transform: translate(calc(4*var(--moveBy)), calc(2.6*var(--moveBy))) rotateZ(-5deg); }
  12%/*100%*/ { opacity: 1; transform: translate(calc(9*var(--moveBy)), calc(3.4*var(--moveBy))) rotateZ(-5deg); }
  12.1%,100% { opacity: 0; }
}
@keyframes walkBack {
  0%,19.9% { opacity: 0; }
  20%/*0%*/ { opacity: 1; transform: translateX(calc(3.3*var(--moveBy))); }
  50%/*60%*/ { opacity: 1; transform: translateX(calc(-6*var(--moveBy))); }
  65%/*90%*/ { opacity: 1; transform: translateX(calc(-10*var(--moveBy))) translateY(calc(-1*var(--moveBy))) rotateZ(5deg); }
  70%/*100%*/ { opacity: 1; transform: translateX(calc(-10*var(--moveBy))) translateY(calc(-1*var(--moveBy))) rotateZ(5deg); }
  70.1%,100% { opacity: 0; }
}
@keyframes climbUp {
  0%,69.9% { opacity: 0; }
  70%/*0%*/ { opacity: 1; transform: translate(0, 0) rotateZ(-15deg); }
  97%/*90%*/ { opacity: 1; transform: translate(calc(3*var(--moveBy)), calc(-3*var(--moveBy))) rotateZ(-15deg); }
  100% { opacity: 1; transform: translate(calc(3.5*var(--moveBy)), calc(-2.5*var(--moveBy))) rotateZ(15deg); }
}
@keyframes stayInvisible {
  0%,100% { opacity: 0; }
}
#scene #secOuts4 #sledging-hill .animateChildAndSledge1 {
  animation: slideDown var(--animation-speed);
  /* animation: slideDown 1.2s 0s linear,
             stayInvisible 8.8s 1.2s linear; */
}
#scene #secOuts4 #sledging-hill .animateChildAndSledge2 {
  animation: walkBack var(--animation-speed);
  /* animation: walkBack 5s 2s linear 1; */
}
#scene #secOuts4 #sledging-hill .animateChildAndSledge3 {
  animation: climbUp var(--animation-speed);
  /* animation: climbUp 3s 7s linear 1; */
}


#scene #secOuts5 {
  height: 100%;
  width: 100%;
  display: grid;
  grid-template-rows: repeat(9, 1fr);
  grid-template-columns: repeat(18, 1fr);
}
#scene #secOuts5 #seesaw {
  grid-row: -4 / -1;
  grid-column: 6 / 11;
  z-index: 5;
}
#scene #secOuts5 #girls {
  grid-row: -4 / -1;
  grid-column: 13 / 17;
  z-index: 5;
  background-image: url('../media/imgs/people/children-9191292_640.png');
}
#scene #secOuts5 #bg-trees{
  grid-row: 4 / -2;
  grid-column: 10 / -2;
  z-index: 4;
}
#scene #secOuts5 #playground {
  grid-row: 3 / -3;
  grid-column: 5 / 12;
  z-index: 3;
  background-image: url('../media/imgs/houses/climbing-frame-1997833_640.png');
}
#scene #secOuts5 #snowhill {
  grid-row: 2 / -4;
  grid-column: 1 / 12;
  z-index: 2;
  background-image: url('../media/imgs/houses/snow-pile-576572_640.png');
}
#scene #secOuts5 #bg-houses {
  grid-row: 2 / 5;
  grid-column: -11 / -4;
  z-index: 1;
  background-image: url('../media/imgs/houses/christmas-7615438_640.png');
}
#scene #secOuts5 > figure {
  background-size: contain;
  background-repeat: no-repeat;
  /* background-color: rgb(100,250,0,0.3); */
}
/* #scene #secHme5 {
  background-color: orange;
  height: 100%;
  width: 100%;
}
#scene #homes5 {
  background-image: url('../media/imgs/houses/winter-9191290_640.png');
  background-size: contain;
  background-repeat: no-repeat;
}
#scene #secOuts4 {
  background-color: yellow;
  height: 100%;
  width: 100%;
} */

#scene #home1 {
  /* --base-size: calc(var(--grid-cell-length) * 1.5); */
  --house-l:     calc(var(--grid-cell-length) * 5.55);
  --house-w:     calc(var(--grid-cell-length) * 3.75);
  --house-h:     calc(var(--grid-cell-length) * 3);
  --window-size: calc(var(--grid-cell-length) * 1.5);
  --attic-h:     calc(var(--grid-cell-length) * 1.3);
  --roof-h:      calc(var(--grid-cell-length) * 2.25);
  --tilt-deg:    55deg; /*eliminate roof-h, tilt-deg later as dependent on attic-h & house-w*/
}
#scene #secHme3 {
  --distance-from-home1: calc(var(--grid-cell-length) * 3.75 * -1.01);
  --house-l:     calc(var(--grid-cell-length) * 5.55);
  --house-w:     calc(var(--grid-cell-length) * 3.75);
  --house-h:     calc(var(--grid-cell-length) * 3);
  --window-size: calc(var(--grid-cell-length) * 1.5);
  --attic-h:     calc(var(--grid-cell-length) * 1.3);
  --roof-h:      calc(var(--grid-cell-length) * 2.25);
  --tilt-deg:    55deg;
}
#scene #home1 .prism .roof { --bg-scale: 3; 
  background-image: url("../media/imgs/tiles/roof/wood-1099960_640.jpg"); 
  /* background: rgba(0,255,255,0.1); */
}
/* #scene #home3 .prism .roof { --bg-scale: 3.1; 
  background-image: url("../media/imgs/tiles/roof/roof-8031972_640.png"); 
} */
#scene #home3 .prism .roof { --bg-scale: 3.1; 
  background-image: url("../media/imgs/tiles/roof/theatre-2520420_purple-brown.png"); 
  /* background: rgba(0,255,255,0.1); */
}
#scene #home1 .brick { --bg-scale: 1.5; 
  /* background: rgba(0,255,255,0.1); */
  background-image: url("../media/imgs/tiles/bricks-8753855-alt_640.png"); 
}
#scene #home3 .brick { --bg-scale: 3.5; 
  /* background: rgba(0,255,255,0.1); */
  background-image: url("../media/imgs/tiles/bricks-orange-3749776_640.png");
}
/* #scene #home1 .prism .attic,
#scene #home3 .prism .attic {
  background-color: lime;
} */
#scene #home1 .cuboid .wall.back { background-image: url("../media/imgs/interior/fireplace-4599325_flipped_s.png");
                                   background-position: bottom left; background-size: contain; }
#scene #home3 .cuboid .wall.back { background-image: url("../media/imgs/interior/fireplace-5179720_640.png");
                                   background-position: bottom center; background-size: contain; }
#scene #home1 .cuboid .floor { background-color: #433645; }
#scene #home3 .cuboid .floor { background-color: #433645; }
#scene #home1 .cuboid .wall.right .window {
  background-image: url("../media/imgs/windows/window-8769303_640.png");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center center;
  margin-bottom: 5%;
  height: 56%;
}
#scene #home3 .cuboid .wall.right .window {
  background-image: url("../media/imgs/windows/window-8769303_640.png");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center center;
  margin-bottom: 5%;
  height: 56%;
}
#scene #home1 .cuboid .wall.front .door {
  grid-row: 1 / -1;
  grid-column: 2 / 3;
  background-image: url("../media/imgs/windows/door-575966_edited.png");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: bottom center;
}
#scene #home3 .cuboid .wall.front .door {
  grid-row: 1 / -1;
  grid-column: 2 / 3;
  background-image: url("../media/imgs/windows/door-575980_640.png");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: bottom center;
}
#scene #home1 .cuboid .wall.front .window.left {
  background-image: url("../media/imgs/windows/window-frame-4036386_640.png");
}
#scene #home3 .cuboid .wall.front .window.left {
  background-image: url("../media/imgs/windows/window-frame-lg-4036386_640.png");
}
#scene #home1 .cuboid .wall.front .window.right {
  --window-frame-outside: calc(var(--window-size) / 20);
  --window-frame-inside: calc(var(--window-size) / 25);
  --window-grid-track-count: 5;
}
#scene #home3 .cuboid .wall.front .window.right {
  --window-frame-outside: calc(var(--window-size) / 20);
  --window-frame-inside: calc(var(--window-size) / 25);
  --window-grid-r-track-count: 6;
  --window-grid-c-track-count: 9;
}
#scene #home1 .cuboid .wall.front .window.right .inside {
  grid-template-rows: var(--window-frame-outside) var(--window-frame-inside) repeat(var(--window-grid-track-count),1fr) var(--window-frame-inside) var(--window-frame-outside);
  grid-template-columns: var(--window-frame-outside) var(--window-frame-inside) repeat(var(--window-grid-track-count),1fr) var(--window-frame-inside) var(--window-frame-outside);
}
#scene #home1 .cuboid .wall.front .window.right .inside::after { /* ::after paints after the element’s children, making it visually above them */
  background-image: url("../media/imgs/windows/window-frame-lg-4036386_640.png");
}
#scene #home3 .cuboid .wall.front .window .inside {
  grid-template-rows: var(--window-frame-outside) var(--window-frame-inside) repeat(var(--window-grid-r-track-count),1fr) var(--window-frame-inside) var(--window-frame-outside);
  grid-template-columns: var(--window-frame-outside) var(--window-frame-inside) repeat(var(--window-grid-c-track-count),1fr) var(--window-frame-inside) var(--window-frame-outside);
}
#scene #home3 .cuboid .wall.front .window .inside::after {
  background-image: url("../media/imgs/windows/window-frame-lg-4036386_640.png");
}
#scene #home3 .cuboid .wall.front .window.right .inside #bg-xmas-tree {
  grid-row: 3 / -3;
  grid-column: 3 / -3;
  background-image: url("../media/imgs/trees/fir-tree-42473_640.png");
  background-size: cover;
}

#scene > section,
#scene > section > figure,
#scene > section > figure > .cube,
#scene > section > figure > .cuboid,
#scene > section > figure > .prism {
  transform-style: preserve-3d;
}
#scene .home.constructed .plane {
  position: absolute;
  /* outline: 4px dashed cyan; */
  /* background: rgba(0,255,255,0.1); */
}
#scene .home.constructed {
  height: var(--house-h);
  width: var(--house-l);
}
#scene .home.constructed .cuboid .wall.long {
  height: var(--house-h);
  width: var(--house-l);
}
#scene .home.constructed .cuboid .wall.short {
  height: var(--house-h);
  width: var(--house-w);
  display: flex;
  flex-direction: column;
  justify-content: center;
}
#scene .home.constructed .cuboid .wall.left {
  transform-origin: left; /*affects attic-wall if moved to .wall.short*/
  transform: rotateY(90deg);
}
#scene .home.constructed .cuboid .wall.right {
  transform-origin: left;
  transform: rotateY(90deg) translateZ(var(--house-l));
}
#scene .home.constructed .cuboid .wall.back {
  transform: translateZ(calc(-1 * var(--house-w)));
}
#scene .home.constructed .cuboid .floor {
  height: var(--house-w);
  width: var(--house-l);
  transform-origin: top;
  transform: rotateX(-90deg) translateZ(calc(var(--house-h)));
}
#scene .home.constructed .prism {
  height: var(--roof-h);
  width: var(--house-l);
  transform-origin: top;
  transform: rotateX(180deg);
  transform-style: preserve-3d; /*duplicated as earlier rule doesn't want to apply*/
}
#scene .home.constructed .prism .roof {
  width: 100%;
  height: 100%;
  transform-origin: top;
  background-size: auto calc(var(--grid-cell-length) * var(--bg-scale,1));
  background-position: bottom;
}
#scene .home.constructed .prism .roof.front {
  transform: rotateX(var(--tilt-deg));
}
#scene .home.constructed .prism .roof.back {
  transform: translateZ(var(--house-w)) rotateX(calc(-1*var(--tilt-deg)));
}
#scene .home.constructed .prism .attic {
  height: var(--attic-h);
  width: var(--house-w);
  clip-path: polygon(50% 100%,100% 0,0 0); /*inverted triangle*/
  transform-origin: left;
}
#scene .home.constructed .prism .attic.left {
  transform: rotateY(-90deg);
}
#scene .home.constructed .prism .attic.right {
  transform: rotateY(-90deg) translateZ(calc(-1*var(--house-l)));
}
#scene .home.constructed .brick {
  background-size: auto calc(var(--grid-cell-length) * var(--bg-scale,1));
  background-position: bottom;
}
#scene .home.constructed .cuboid .wall.front {
  display: grid;
  grid-template: "top  top  top  top  top  top  top"  1.5fr
                 "midL midL midL winL midC winR midR" var(--window-size)
                 "bot  bot  bot  bot  bot  bot  bot"  2fr / 1fr var(--window-size) 1fr var(--window-size) 2fr var(--window-size) 1fr;
}
#scene .home.constructed .cuboid .wall.front .top        { grid-area: top; }
#scene .home.constructed .cuboid .wall.front .bottom     { grid-area: bot; }
#scene .home.constructed .cuboid .wall.front .mid.left   { grid-area: midL; }
#scene .home.constructed .cuboid .wall.front .mid.centre { grid-area: midC; }
#scene .home.constructed .cuboid .wall.front .mid.right  { grid-area: midR; }

#scene .home.constructed .cuboid .wall.front .window.left {
  grid-area: winL;
  background-size: cover;
}
#scene .home.constructed .cuboid .wall.front .window.right {
  grid-area: winR;
  transform-style: preserve-3d; /*necessary for postcard writing fly out*/
}
#scene .home.constructed .cuboid .wall.front .window .inside {
  height: 100%;
  width: 100%;
  display: grid;
  position: relative;
  /* overflow: visible; */
}
#scene .home.constructed .cuboid .wall.front .window .inside::after { /* ::after paints after the element’s children, making it visually above them */
  content: "";
  position: absolute;
  inset: 0; /* inset = shorthand for top/right/bottom/left, so inset:0; = cover parent container's full size */
  background-size: cover;
  pointer-events: none;
}
#scene .home.constructed .wall .door,
#scene .home.constructed .wall .window,
#scene .home.constructed .wall .window .inside::after {
  z-index: 1;
}
/*z-index stacking context (when items are layered in the same plane, not in 3d space)
  99    = first in view of camera lense  - e.g. nav menu, postcard fly out
  10    = labels on top of all objects   - e.g. day numbers
   1(+) = outside objects layered on top - e.g. doors & windows on top of brick wall
  -1(-) = inside objects layered behind  - e.g. candles, bauble tree, tv, balloon behind window frame
*/
#scene .home.constructed .cuboid .wall.front .window,
#scene .home.constructed .cuboid .wall.front .window .inside,
#scene .home.constructed .cuboid .wall.front .window .inside::after {
  pointer-events: none; /* to ensure ALL window shells ignore clicks */
}
#scene .home.constructed .cuboid .wall.front .window .inside .clickable {
  pointer-events: auto; /* to allow clicks on the objects inside */
}

/* **************** */
/* ANIMATED OBJECTS */
/* **************** */

/* HOME1 WINDOW - CARTOON CANDLE PAIR, ONE BLOWING OUT THE OTHER */
/* Adapted from original creation by Kevin David, example #36 at https://prismic.io/blog/css-animation-examples or at https://codepen.io/kevin_David_k/pen/eYNeQVY */
@keyframes openEyes {
  0%,100% { opacity: 0; }
  5%,95%  { opacity: 1; }
}
@keyframes blink-eyes {
  0%,35%  { opacity: 1; transform: translate(-70%,  0%); }
  36%,39% { opacity: 0; transform: translate(-70%,  0%); }
  40%     { opacity: 1; transform: translate(-70%,  0%); }
  50%,65% {             transform: translate(-140%, 0%); }
  66%     {             transform: translate(-70%,  0%); }
}
@keyframes expand-body {
  0%,40%  { transform: scale(1,    1)    translate(60%, -25%); }
  45%,55% { transform: scale(1.1,  1.1)  translate(60%, -28%); }
  60%     { transform: scale(0.89, 0.89) translate(60%, -25%); }
  65%     { transform: scale(1,    1)    translate(60%, -25%); }
  70%     { transform: scale(0.95, 0.95) translate(60%, -25%); }
  75%     { transform: scale(1,    1)    translate(60%, -25%); }
}
@keyframes uff {
  0%,40%  { width: 0px;                         height: 0px; }
  50%,54% { width: calc(var(--base-size)*3/10); height: calc(var(--base-size)*3/10); left: 30%; }
  59%     { width: calc(var(--base-size)/10);   height: calc(var(--base-size)/10);   left: 20%; }
  62%     { width: calc(var(--base-size)/25);   height: calc(var(--base-size)/25);   left: 20%; }
  67%     { width: 0px;                         height: 0px;                         left: 30%; }
}
@keyframes change-background {
  0%,59%,98%,100% { background: transparent; }
  61%,97%         { background: #000; }
}
@keyframes move-left {
  0%,59%,100% { opacity: 1; width: 0px;                        left: 10%; }
  60%         { opacity: 1; width: calc(var(--base-size)*3/5); left: 0%; }
  68%         { opacity: 1; width: 0px;                        left: -10%; }
}
@keyframes move-top {
  0%,64%,100% { opacity: 1; width: 0px;                      height: 0px;                      top: -80%; }
  65%         { opacity: 1; width: calc(var(--base-size)/5); height: calc(var(--base-size)/5); top: -40%; left: 35%; }
  80%         { opacity: 1; width: 0px;                      height: 0px;                      top: -60%; }
}
@keyframes shake-left {
  0%,40%  { left: -10%; transform: translate(60%, -15%); }
  50%,54% { left: -10%; transform: translate(60%, -15%); }
  59%     { left: -10%; transform: translate(60%, -15%); }
  62%     { left: -12%; transform: translate(60%, -15%); }
  65%     { left: -11%; transform: translate(60%, -15%); }
  67%     { left: -10%; transform: translate(60%, -15%); }
  74%     { left: -10%; transform: translate(60%, -15%);
                         background: var(--candle-colour-gradient); border-color: #673C63; }
  75%     { left: -10%; transform: scale(1.15, 0.85) translate(60%, -15%);
                         background: #fff;                        border-color: #673C63; }
  91%     { left: -10%; transform: scale(1.18, 0.82) translate(60%, -10%);
                         background: #F44336;                     border-color: #F44336; box-shadow: calc(var(--base-size)/25*-1) 0px 0px #F44336 inset; }
  92%     { left: -10%; transform: scale(0.85, 1.15) translate(60%, -15%);
                         background: #fff;                        border-color: #673C63; }
  93%     { left: -10%; transform: scale(0.85, 1.15) translate(60%, -15%);
                         background: var(--candle-colour-gradient); border-color: #673C63; }
  95%     { left: -10%; transform: scale(1.05, 0.95) translate(60%, -15%); }
  97%     { left: -10%; transform: scale(1, 1) translate(60%, -15%); }
}
@keyframes stick-animation {
  0%,40%  { left: 50%; top: 0%; transform:                 translate(-50%, -100%); }
  50%,54% { left: 50%; top: 0%; transform:                 translate(-50%, -100%); }
  59%     { left: 50%; top: 0%; transform:                 translate(-50%, -100%); }
  62%     { left: 50%; top: 0%; transform: rotateZ(-15deg) translate(-50%, -100%); }
  65%     { left: 50%; top: 0%; transform: rotateZ(15deg)  translate(-50%, -100%); }
  70%     { left: 50%; top: 0%; transform: rotateZ(-5deg)  translate(-50%, -100%); }
  72%     { left: 50%; top: 0%; transform: rotateZ(5deg)   translate(-50%, -100%); }
  74%,84% { left: 50%; top: 0%; transform: rotateZ(0deg)   translate(-50%, -100%); }
  85%     {                     transform: rotateZ(180deg) translate(  0%,  120%); }
  92%     { left: 50%; top: 0%; transform:                 translate(-50%, -100%); }
}
@keyframes dance-fire {
  59%,89%                            { left: 55%;   width: 0px;                          height: 0px; }
  90%,0%,7%,15%,23%,31%,39%,47%,55%  { left: 55.8%; width: calc(var(--base-size)/50*17); height: calc(var(--base-size)*2/5);
                                       background: #FFC107; }
  94%,3%,11%,19%,27%,35%,43%,51%,58% { left: 56.2%; width: calc(var(--base-size)/50*17); height: calc(var(--base-size)*2/5);
                                       background: #FF9800; }
}
@keyframes changeto-lower {
  0%,70%,90% { display: inline-block;
               background: #673C63; padding: 0px;
               border: 0px solid #673C63; border-radius: 100%; border-width: 0 0 0 0;
               transform: translate(-90%, 0%); }
  71%,89%    { display: inline-block; float: left;
               background: none;      padding: calc(var(--base-size)/50);
               border: solid #673C63;     border-radius: 0px;  border-width: 0 calc(var(--base-size)/25) calc(var(--base-size)/25) 0;
               transform: rotate(-45deg) translate(-50%, -65%); transform-origin: bottom left;
               -webkit-transform: rotate(-45deg) translate(-50%, -65%); }
}
@keyframes changeto-greater {
  0%,70%,90% { display: inline-block;
               top: 50%;
               background: #673C63; padding: 0px;
               border: 0px solid #673C63; border-radius: 100%; border-width: 0 0 0 0;
               transform: translate(-80%, 0%); }
  71%,89%    { display: inline-block; float: left;
               top: 40%;
               background: none;      padding: calc(var(--base-size)/50);
               border: solid #673C63;     border-radius: 0px;  border-width: 0 calc(var(--base-size)/25) calc(var(--base-size)/25) 0;
               transform: rotate(135deg) translate(-80%, 20%); transform-origin: bottom left;
               -webkit-transform: rotate(135deg) translate(-80%, 20%); }
}
#scene #home1 #candles-pair {
  --base-size: calc(var(--window-size) / 6.6);
  --candle-colour-gradient: linear-gradient(90deg, rgb(235,235,235), #fff, #fff, rgb(225,225,225));
  --animation-speed: 3s linear;
  --animation-speed2: 3.5s linear;
  grid-row: -2 / -5;
  grid-column: -3 / -5;
  /* background-color:rgba(200, 200, 0, 0.6); */
  /* animation: change-background var(--animation-speed); */
}
#scene #home1 #candles-pair .wrapper {
  width: 100%;
  height: 100%;
  position: relative;
  /* background-color:rgba(100, 100, 0, 0.6); */
}
#scene #home1 #candles-pair .candle {
  background: var(--candle-colour-gradient);
}
#scene #home1 #candles-pair .candle1 {
  position: absolute;
  left: 40%;
  top: 33%;
  width: calc(var(--base-size) / 10 * 8.1);
  height: calc(var(--base-size) * 2.1);
  /* border: calc(var(--base-size) / 50 * 3) solid #673C63; */
  border-bottom: 0px;
  border-radius: calc(var(--base-size) / 50 * 3);
  transform-origin: center right;
  transform: translate(60%, -25%);
  box-shadow: calc(var(--base-size) / 50 * -2) 0px 0px #95c6f2 inset;
}
#scene #home1 #candles-pair .candle1__stick,
#scene #home1 #candles-pair .candle2__stick {
  position: absolute;
  left: 52%;
  top: 1%;
  width: calc(var(--base-size) / 50 * 3);
  height: calc(var(--base-size) / 10 * 3);
  background: #673C63;
  border-radius: calc(var(--base-size) / 50 * 8);
  transform: translate(-50%, -100%);
}
#scene #home1 #candles-pair .candle2__stick {
  height: calc(var(--base-size) / 50 * 12);
  transform-origin: bottom center;
}
#scene #home1 #candles-pair .eye {
  opacity: 0;
}
#scene #home1 #candles-pair .candle1__eyes,
#scene #home1 #candles-pair .candle2__eyes {
  position: absolute;
  left: 50%;
  top: 0%;
  width: calc(var(--base-size) / 10 * 7);
  height: calc(var(--base-size) / 5 * 8);
  transform: translate(-50%, 0%);
}
#scene #home1 #candles-pair .tall-candle-eye {
  position: absolute;
  top: 20%;
  width: calc(var(--base-size) / 10);
  height: calc(var(--base-size) / 10);
  background: #673C63;
  border-radius: 50%;
  transform: translate(-70%, 0%);
}
#scene #home1 #candles-pair .candle1__eyes-one {
  left: 30%;
}
#scene #home1 #candles-pair .candle1__eyes-two {
  left: 70%;
}
#scene #home1 #candles-pair .candle1__mouth {
  position: absolute;
  left: 40%;
  top: 30%;
  width: 0px;
  height: 0px;
  border-radius: calc(var(--base-size) / 5 * 2);
  background: #673C63;
  transform: translate(-50%, -50%);
}
#scene #home1 #candles-pair .candle2 {
  position: absolute;
  left: -10%;
  top: 54%;
  width: calc(var(--base-size) / 50 * 42.3);
  height: calc(var(--base-size) / 5 * 6.1);
  /* border: calc(var(--base-size) / 50 * 3) solid #673C63; */
  border-bottom: 0px;
  border-radius: calc(var(--base-size) / 50 * 3);
  transform: translate(60%, -15%);
  transform-origin: center right;
  box-shadow: calc(var(--base-size) / 50 * -2) 0px 0px #95c6f2 inset;
}
#scene #home1 #candles-pair .candle2__eyes-one {
  position: absolute;
  left: 30%;
  top: 50%;
  width: calc(var(--base-size) / 10);
  height: calc(var(--base-size) / 10);
  /* display: inline-block; */
  border: 0px solid #673C63;
  border-radius: 50%;
  float: left;
  background: #673C63;
  transform: translate(-80%, 0%);
}
#scene #home1 #candles-pair .candle2__eyes-two {
  position: absolute;
  left: 70%;
  top: 50%;
  width: calc(var(--base-size) / 10);
  height: calc(var(--base-size) / 10);
  /* display: inline-block; */
  border: 0px solid #673C63;
  border-radius: 50%;
  float: left;
  background: #673C63;
  transform: translate(-80%, 0%);
}
#scene #home1 #candles-pair .candle2__fire {
  position: absolute;
  top: -30%;
  /* top: 34%; */
  left: 53%;
  display: block;
  width: calc(var(--base-size) / 50 * 16);
  height: calc(var(--base-size) / 5 * 1.9);
  background-color: red;
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  background: #FF9800;
  transform: translate(-50%, -50%);
}
#scene #home1 #candles-pair .smoke {
  position: absolute;
  left: 30%;
  transform: translate(-50%, -50%);
  background: grey;
  opacity: 0;
}
#scene #home1 #candles-pair .candle__smoke-one {
  top: -30%;
  width: calc(var(--base-size) / 5 * 3);
  height: calc(var(--base-size) / 50 * 3);
}
#scene #home1 #candles-pair .candle__smoke-two {
  top: -50%;
  width: calc(var(--base-size) / 5);
  height: calc(var(--base-size) / 5);
  border-radius: calc(var(--base-size) / 5);
}
/* #scene #home1 #candles-pair .animateCandleEyes {
  animation: openEyes var(--animation-speed);
} */
#scene #home1 #candles-pair .animateTallCandleBody {
  animation: expand-body var(--animation-speed);
  /* animation: expand-body var(--animation-speed) both; */
}
#scene #home1 #candles-pair .animateTallCandleEyes {
  animation: openEyes var(--animation-speed2),
             blink-eyes var(--animation-speed);
}
#scene #home1 #candles-pair .animateTallCandleMouth {
  animation: uff var(--animation-speed);
}
#scene #home1 #candles-pair .animateShortCandleBody {
  animation: shake-left var(--animation-speed);
}
#scene #home1 #candles-pair .animateShortCandleEye1 {
  animation: openEyes var(--animation-speed2),
             changeto-lower var(--animation-speed);
}
#scene #home1 #candles-pair .animateShortCandleEye2 {
  animation: openEyes var(--animation-speed2),
             changeto-greater var(--animation-speed);
}
#scene #home1 #candles-pair .animateShortCandleStick {
  animation: stick-animation var(--animation-speed);
}
#scene #home1 #candles-pair .animateShortCandleFire {
  animation: dance-fire var(--animation-speed);
}
#scene #home1 #candles-pair .animateShortCandleSmoke1 {
  animation: move-left var(--animation-speed);
}
#scene #home1 #candles-pair .animateShortCandleSmoke2 {
  animation: move-top var(--animation-speed);
}

/* HOME1 WINDOW - TREE WITH SHAKING BAUBLES */
@keyframes tiltStem {
    30% {
        transform: rotateZ(-0.5deg);
    }
    60% {
        transform: rotateZ(0.2deg);
    }
    90% {
        transform: rotateZ(-0.1deg);
    }
}
@keyframes tiltBauble {
    30% {
        transform: translateZ(var(--z-offset)) rotateY(12deg) rotateX(-4deg) rotateZ(2deg);
    }
    60% {
        transform: translateZ(var(--z-offset)) rotateY(9deg) rotateX(2deg) rotateZ(-1deg);
    }
    90% {
        transform: translateZ(var(--z-offset)) rotateY(7deg) rotateX(-1deg);
    }
}
@keyframes scaleBauble {
    30% {
        transform: scale(0.95) translate(calc(var(--move-unit) * -14), calc(var(--move-unit) * -8));
    }
    60% {
        transform: scale(1.03) translate(calc(var(--move-unit) * 10), calc(var(--move-unit) * 5));
    }
    90% {
        transform: scale(0.99) translate(calc(var(--move-unit) * -0.5), calc(var(--move-unit) * -1.5));
    }
}
/* alt. direction fwd-left (nb. requires bauble tops' 6deg default rotation instead of -6deg): */
/* @keyframes tiltBauble {
    30% {
        transform: translateZ(var(--z-offset)) rotateY(-12deg) rotateX(4deg) rotateZ(2deg);
    }
    60% {
        transform: translateZ(var(--z-offset)) rotateY(-9deg) rotateX(-2deg) rotateZ(-1deg);
    }
    90% {
        transform: translateZ(var(--z-offset)) rotateY(-7deg) rotateX(1deg);
    }
}
@keyframes scaleBauble {
    30% {
        transform: scale(1.05) translate(calc(var(--move-unit) * -14), calc(var(--move-unit) * 8));
    }
    60% {
        transform: scale(0.97) translate(calc(var(--move-unit) * 10), calc(var(--move-unit) * -5));
    }
    90% {
        transform: scale(1.01) translate(calc(var(--move-unit) * -0.5), calc(var(--move-unit) * 1.5));
    }
} */
#scene #home1 #bauble-tree {
  grid-row: 2 / -2;
  grid-column: 2 / 6;
  z-index: -1;
  height: calc(var(--window-size) - var(--window-frame-outside)*2);
  /* width: auto; */
  aspect-ratio: 1 / 1.3954;
  /* width: calc(var(--window-size) - var(--window-frame-outside) * 2); */
  /* height: auto; */
  /* height: calc(var(--window-size) - var(--window-size) / 20 * 2); */
  /* width: 100%; */
  /* height: calc(var(--window-width) * 1.3954);
  width: var(--window-width); */
    /* --width: 440px;
    --height: calc(var(--width) * 1.3954); */
    /* --frame-width: calc(var(--width) / 20); */
  --bauble-width: calc(var(--window-size)/1.3954 / 7 * var(--bauble-size-factor,1));
    --move-unit: calc(var(--bauble-width) / 320);
    --animation-speed1: 1s ease-in-out both;
    --animation-speed2: 0.9s 0.1s ease-in-out both;
    --grid-span: 20;
    /* width: var(--height); */
    /* display: grid;
    grid-template-rows: calc(var(--frame-width)/2) auto calc(var(--frame-width)/2);
    grid-template-columns: calc(var(--frame-width)/2) auto calc(var(--frame-width)/2); */
    transform-style: preserve-3d;
}
/* #scene #home1 #bauble-tree .frame {
    grid-area: 1 / 1 / -1 / -1;
    border: var(--frame-width) solid #483C32;
    z-index: 1;
} */
#scene #home1 #bauble-tree .canvas {
    /* grid-area: 2 / 2 / -2 / -2; */
    width: 100%;
    height: 100%;
    background-image: url("../media/imgs/trees/fir-trees-6578788_640.png");
    background-size: cover;
    background-position: bottom;
    transform-origin: bottom left;
    display: grid;
    grid-template-rows: repeat(100, 1fr);
    grid-template-columns: repeat(100, 1fr);
    justify-items: center;
}
#scene #home1 #bauble-tree #bauble-red  { --hanging-point-col: 37; --hanging-point-row: 2;  }
#scene #home1 #bauble-tree #bauble-blue { --hanging-point-col: 18; --hanging-point-row: 15; }
#scene #home1 #bauble-tree #bauble-prpl { --hanging-point-col: 50; --hanging-point-row: 32; }
#scene #home1 #bauble-tree #bauble-turq { --hanging-point-col: 23; --hanging-point-row: 54; }
#scene #home1 #bauble-tree #bauble-gold { --hanging-point-col: 52; --hanging-point-row: 54; }
#scene #home1 #bauble-tree #bauble-indg { --hanging-point-col: 78; --hanging-point-row: 66; }
#scene #home1 #bauble-tree #bauble-pink { --hanging-point-col: 30; --hanging-point-row: 82;
}
#scene #home1 #bauble-tree .bauble {
    grid-row: var(--hanging-point-row, 50) / span var(--grid-span);
    grid-column: calc(var(--hanging-point-col, 50) - var(--grid-span)/2) / span var(--grid-span);
    width: calc(var(--window-size)/1.3954 / 7 * var(--bauble-size-factor,1)); /* used in many calculations below, but cannot be saved into a variable as too many substitutions lead to browser time out before calculation is completed */
    height: calc(var(--window-size)/1.3954/7*var(--bauble-size-factor,1) + var(--window-size)/1.3954/7*var(--bauble-size-factor,1)*230/320 - var(--window-size)/1.3954/7*var(--bauble-size-factor,1)*0.034226); /*= sphere-height + bauble-top-height - overlap (all based on bauble width) */
    perspective: 300px; /* for depth illusion */
    transform-style: preserve-3d;
    position: relative;
}
#scene #home1 #bauble-tree .bauble.s  { --bauble-size-factor: 0.9; }
#scene #home1 #bauble-tree .bauble.m  { --bauble-size-factor: 1;   }
#scene #home1 #bauble-tree .bauble.l  { --bauble-size-factor: 1.1; }
#scene #home1 #bauble-tree .bauble.xl { --bauble-size-factor: 1.2;
}
#scene #home1 #bauble-tree .bauble-part {
    position: absolute;
    width: 100%;
    background-size: contain;
    background-repeat: no-repeat;
    transform-style: preserve-3d;
}
#scene #home1 #bauble-tree .top {
    --z-offset: calc(var(--window-size)/1.3954/7*var(--bauble-size-factor,1) * 0.07); /* z-offset/translateZ as z-index doesn't work when there's perspective */
    transform: rotateY(-6deg) translateZ(var(--z-offset)); /* for alt. direction change to 6deg */
    height: calc(var(--window-size)/1.3954/7*var(--bauble-size-factor,1) * 230/320);
    transform-origin: top center;
}
#scene #home1 #bauble-tree .sphere {
    bottom: 0;
    background-position: bottom; /* this plus following properties together clip the image into a perfect sphere */
    height: calc(var(--window-size)/1.3954 / 7 * var(--bauble-size-factor,1)); /* same as bauble width */
    border-radius: 50%; /* circle shape */
}
#scene #home1 #bauble-tree #bauble-red  .top    { background-image: url(../media/imgs/baubles/bauble-1814941_640_top.png); }
#scene #home1 #bauble-tree #bauble-red  .sphere { background-image: url(../media/imgs/baubles/bauble-1814941_640_bottom.png); }
#scene #home1 #bauble-tree #bauble-blue .top    { background-image: url(../media/imgs/baubles/bauble-1814972_640_top.png); }
#scene #home1 #bauble-tree #bauble-blue .sphere { background-image: url(../media/imgs/baubles/bauble-1814972_640_bottom.png); }
#scene #home1 #bauble-tree #bauble-prpl .top    { background-image: url(../media/imgs/baubles/bauble-1814937_640_top.png); }
#scene #home1 #bauble-tree #bauble-prpl .sphere { background-image: url(../media/imgs/baubles/bauble-1814937_640_bottom.png); }
#scene #home1 #bauble-tree #bauble-turq .top    { background-image: url(../media/imgs/baubles/bauble-1814977_640_top.png); }
#scene #home1 #bauble-tree #bauble-turq .sphere { background-image: url(../media/imgs/baubles/bauble-1814977_640_bottom.png); }
#scene #home1 #bauble-tree #bauble-gold .top    { background-image: url(../media/imgs/baubles/bauble-1814949_640_top.png); }
#scene #home1 #bauble-tree #bauble-gold .sphere { background-image: url(../media/imgs/baubles/bauble-1814949_640_bottom.png); }
#scene #home1 #bauble-tree #bauble-indg .top    { background-image: url(../media/imgs/baubles/bauble-1814951_640_top.png); }
#scene #home1 #bauble-tree #bauble-indg .sphere { background-image: url(../media/imgs/baubles/bauble-1814951_640_bottom.png); }
#scene #home1 #bauble-tree #bauble-pink .top    { background-image: url(../media/imgs/baubles/bauble-1814943_640_top.png); }
#scene #home1 #bauble-tree #bauble-pink .sphere { background-image: url(../media/imgs/baubles/bauble-1814943_640_bottom.png);
}
#scene #home1 #bauble-tree .animateTree {
    animation: tiltStem var(--animation-speed1);
}
#scene #home1 #bauble-tree .free .animateFreeBaubleTop {
    animation: tiltBauble var(--animation-speed1);
}
#scene #home1 #bauble-tree .free .animateFreeBaubleSphere {
    animation: scaleBauble var(--animation-speed1);
}
#scene #home1 #bauble-tree .constricted .animateConstrictedBaubleTop {
    animation: tiltBauble var(--animation-speed2);
}
#scene #home1 #bauble-tree .constricted .animateConstrictedBaubleSphere {
    animation: scaleBauble var(--animation-speed2);
}

/* HOME1 WINDOW - POSTCARD FLYING OUT & TURNING OVER */
@keyframes flyOutnFlip {
  0% {
    z-index: 99;
    transform: scale(1) rotateY(0);
  }
  15%, 90% {
    z-index: 99;
    transform: scale(12) translateZ(var(--base-size)) rotateY(180deg) rotateZ(10deg);
  }
  100% {
    z-index: 99;
    transform: scale(1) rotateY(360deg);
  }
}
@keyframes unblurText {
  0% {
    opacity: 0;
    transform: translateZ(50px) rotateZ(-10deg) rotateY(90deg) scale(0.1) translateX(var(--base-size));
  }
  15%, 90% {
    opacity: 1;
    transform: translateZ(50px) rotateZ(-10deg) rotateY(0deg)  scale(1);
  }
  100% {
    opacity: 0;
    transform: translateZ(50px) rotateZ(-10deg) rotateY(90deg) scale(0.1) translateX(var(--base-size));
  }
}
#scene #home1 #postcard {
  --base-size: calc(var(--grid-cell-length) / 100);
  --animation-speed: 5s ease-in;
  --delay: 5s;
  grid-row: 4 / 5;
  grid-column: -5 / -6;
  display: flex;
  align-items: center;
  z-index: -2;
  transform-style: preserve-3d;
  position: relative;
}
#scene #home1 #postcard .plane {
  width: 100%;
  height: 60%;
  border-radius: 20%;
  transform-style: preserve-3d;
  position: relative;
}
#scene #home1 #postcard .face {
  position: absolute;
  height: 100%;
  width: 100%;
  backface-visibility: hidden;
  background-size: contain;
  background-repeat: no-repeat;
}
#scene #home1 #postcard .front {
  background-image: url("../media/imgs/objects/postcard-front-9942094_640.png");
  transform: translateZ(var(--base-size));
}
#scene #home1 #postcard .back {
  background-image: url("../media/imgs/objects/postcard-back-1412352_640.png");
  transform: rotateY(180deg);
  position: relative;
  display: flex;
  align-items: center;
}
/* #scene #home1 #postcard .back .writing {
  background-color: yellow;
  opacity: 0.5;
  width: 60%;
  height: 100%;
  position: absolute;
  top: calc(var(--base-size) * -5);
  left: calc(var(--base-size) * 4);
  transform: translateZ(var(--base-size));
  display: flex;
  align-items: center;
  text-align: center;
  font-size: calc(var(--base-size) * 2.5);
  line-height: calc(var(--base-size) * 3);
  font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
  font-style: italic;
} */
#scene .window.right .large-writing.postcard {
  position: absolute;
  left: calc(var(--grid-cell-length) * -0.6);
  top: calc(var(--grid-cell-length) * -0.1);
  width: calc(var(--grid-cell-length) * 1.5);
  text-align: center;
  font-size: calc(var(--grid-cell-length) / 3.5);
  font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
  font-style: italic;
  transform: translateZ(-50px) rotateZ(-10deg) rotateY(90deg);
}
#scene #home1 #postcard.animatePostcard { /*!no space to select #postcard rather than one of its children*/
  animation: flyOutnFlip var(--animation-speed);
}
#scene #home1 .large-writing.postcard.animateWriting {
  animation: unblurText 5s ease-in;
}

/* HOME1 WINDOW - TV scene */
/* Adapted from original creation by Tippy fodder, example #24 at https://prismic.io/blog/css-animation-examples or at https://codepen.io/tippyfodder/pen/OyXWpr */
@keyframes tree {
  0%   { transform: translate(1350px) /*translateX(calc(var(--base-size)*9/4 * var(--scale-up-factor)))*/; }
  50%  { }
  100% { transform: translate(-50px) /*translateX(calc(var(--base-size)*-1/12 * var(--scale-up-factor)))*/; }
}
@keyframes tree2 {
  0%   { transform: translate(650px) /*translate(calc(var(--base-size)*13/12 * var(--scale-up-factor)))*/; }
  50%  { }
  100% { transform: translate(-50px) /*translate(calc(var(--base-size)*-1/12 * var(--scale-up-factor)))*/; }
}
@keyframes tree3 {
  0%   { transform: translate(2750px) /*translate(calc(var(--base-size)*55/12 * var(--scale-up-factor)))*/; }
  50%  { }
  100% { transform: translate(-50px) /*translate(calc(var(--base-size)*-1/12 * var(--scale-up-factor)))*/; }
}
@keyframes rock {
  0%   { right: -200px /*calc(var(--base-size)*-1/3)*/; }
  100% { right: 2000px /*calc(var(--base-size)*10/3)*/; }
}
@keyframes truck {
  0%   { }
  6%   { transform: translateY(0px); }
  7%   { transform: translateY(-6px) /*translateY(calc(var(--base-size)*-1/100))*/; }
  9%   { transform: translateY(0px); }
  10%  { transform: translateY(-1px) /*translateY(calc(var(--base-size)*-1/600))*/; }
  11%  { transform: translateY(0px); }
  100% { }
}
@keyframes wind {
  0%   { }
  50%  { transform: translateY(3px) /*translateY(calc(var(--base-size)/200))*/; }
  100% { }
}
@keyframes mtn {
  100% { transform: translateX(-2000px) /*translateX(calc(var(--base-size)*-10/3))*/ rotate(130deg); }
}
@keyframes hill {
  100% { transform: translateX(-2000px) /*translateX(calc(var(--base-size)*-10/3))*/; }
}
#scene #home1 #tv {
  /* --base-size: calc(var(--grid-cell-length) * 1);
  --scale-up-factor: 12; */
  --grid-cell-count: 5;
  --tv-width: calc(var(--grid-cell-length) * var(--grid-cell-count));
  --grid-cell-ref: 33; /* pure number matching the grid-cell-length's computed px reference in DevTools */
  --tv-scale-base: 0.05;
  --tv-scale-factor: calc(var(--grid-cell-length)/1px / var(--grid-cell-ref) * var(--tv-scale-base)); /*nb. var(--grid-cell-length)/1px turns it into a unitless number */
  --animationDuration: 10; /*seconds, but must stay unitless for loop-count calculations*/
  grid-row: 5 / 7;
  grid-column: -1 / -6;
  z-index: -2;
  overflow: hidden;
  position: relative;
}
#scene #home1 #tv .tv-frame {
  position: absolute;
  inset: 0;
  background-image: url("../media/imgs/objects/tv-675803_640.png");
  background-size: contain;
  background-repeat: no-repeat;
}
#scene #home1 #tv .loop-wrapper {
  /* width: 600px; /*orig. var(--base-size) -> calc(var(--base-size)/1.5) */
  /* height: 250px; /*orig. var(--base-size)*5/12 -> calc(var(--base-size)*3.5/12) */
  width: 400px;
  height: 200px;
  border-bottom: calc(600px/7) solid brown;
  background: lightskyblue;
  position: absolute;
  /* margin-top: calc(var(--base-size)/20);
  margin-left: calc(var(--base-size)/30); */
  bottom: calc(var(--grid-cell-length)/30); /* your placement tweak inside the frame */
  left: calc(var(--grid-cell-length)/30);
  transform-origin: bottom left;
  transform: scale(var(--tv-scale-factor));
  overflow: hidden;
}
#scene #home1 #tv .mountain {
  position: absolute;
  right: -900px /*calc(var(--base-size)*-3/2)*/;
  bottom: -20px /*calc(var(--base-size)*-1/30)*/;
  width: 2px /*calc(var(--base-size)/300)*/;
  height: 2px /*calc(var(--base-size)/300)*/;
  box-shadow: 
    0 0 0 50px #4DB6AC,
    60px 50px 0 70px #4DB6AC,
    90px 90px 0 50px #4DB6AC,
    250px 250px 0 50px #4DB6AC,
    290px 320px 0 50px #4DB6AC,
    320px 400px 0 50px #4DB6AC
    /* 0 0 0 calc(var(--base-size)/12) #4DB6AC,
    calc(var(--base-size)/10) calc(var(--base-size)/12) 0 calc(var(--base-size)*14/120) #4DB6AC,
    calc(var(--base-size)*3/20) calc(var(--base-size)*3/20) 0 calc(var(--base-size)/12) #4DB6AC,
    calc(var(--base-size)*5/12) calc(var(--base-size)*5/12) 0 calc(var(--base-size)/12) #4DB6AC,
    calc(var(--base-size)*29/60) calc(var(--base-size)*16/30) 0 calc(var(--base-size)/12) #4DB6AC,
    calc(var(--base-size)*16/30) calc(var(--base-size)*2/3) 0 calc(var(--base-size)/12) #4DB6AC*/
    ;
  transform: rotate(130deg);
  /* animation: mtn 20s linear infinite; */
}
#scene #home1 #tv .hill {
  position: absolute;
  right: -900px /*calc(var(--base-size)*-3/2)*/;
  bottom: -50px /*calc(var(--base-size)*-1/12)*/;
  width: 400px /*calc(var(--base-size)*2/3)*/;
  border-radius: 50%;
  height: 20px /*calc(var(--base-size)/30)*/;
  box-shadow: 
    0 0 0 50px #4DB6AC,
    -20px 0 0 20px #4DB6AC,
    -90px 0 0 50px #4DB6AC,
    250px 0 0 50px #4DB6AC,
    290px 0 0 50px #4DB6AC,
    620px 0 0 50px #4DB6AC
    /*0 0 0 calc(var(--base-size)/12) #4DB6AC,
    calc(var(--base-size)*-1/30) 0 0 calc(var(--base-size)/30) #4DB6AC,
    calc(var(--base-size)*-3/20) 0 0 calc(var(--base-size)/12) #4DB6AC,
    calc(var(--base-size)*5/12) 0 0 calc(var(--base-size)/12) #4DB6AC,
    calc(var(--base-size)*29/60) 0 0 calc(var(--base-size)/12) #4DB6AC,
    calc(var(--base-size)*31/30) 0 0 calc(var(--base-size)/12) #4DB6AC*/
    ;
  /* animation: hill 4s 2s linear infinite; */
}
#scene #home1 #tv .loop-wrapper .tree,
#scene #home1 #tv .loop-wrapper .tree:nth-child(2),
#scene #home1 #tv .loop-wrapper .tree:nth-child(3) {
  position: absolute;
  height: 100px /*calc(var(--base-size)/6)*/;
  width: 35px /*calc(var(--base-size)*7/120)*/;
  bottom: 0;
  /* background: url(../media/imgs/trees/mini-tree_fir-306782_640.png) no-repeat; */
  background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/130015/tree.svg) no-repeat;
}
#scene #home1 #tv .rock {
  margin-top: -17%;
  height: 2%; 
  width: 2%;
  bottom: -2px /*calc(var(--base-size)*-1/300)*/;
  border-radius: 20px /*calc(var(--base-size)/30)*/;
  position: absolute;
  background: #ddd;
}
#scene #home1 #tv .truck,
#scene #home1 #tv .wheels {
  transition: all ease;
  width: 85px /*calc(var(--base-size)*17/120)*/;
  margin-right: -60px /*calc(var(--base-size)*-1/10)*/;
  bottom: 0px;
  right: 50%;
  position: absolute;
  background: #eee;
}
#scene #home1 #tv .truck {
  background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/130015/truck.svg) no-repeat;
  background-size: contain;
  height: 60px /*calc(var(--base-size)/10)*/;
}
#scene #home1 #tv .truck:before {
  content: " ";
  position: absolute;
  width: 25px /*calc(var(--base-size)/24)*/;
  box-shadow:
    -30px 28px 0 1.5px #fff,
    -35px 18px 0 1.5px #fff
    /*calc(var(--base-size)*-1/20) calc(var(--base-size)*7/150) 0 calc(var(--base-size)/400) #fff,
    calc(var(--base-size)*-7/120) calc(var(--base-size)*3/100) 0 calc(var(--base-size)/400) #fff*/
    ;
  /* animation: wind 1.5s   0.000s ease infinite; */
}
#scene #home1 #tv .wheels {
  background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/130015/wheels.svg) no-repeat;
  height: 15px /*calc(var(--base-size)/40)*/;
  margin-bottom: 0;
}
#scene #home1 #tv .loop-wrapper .animateMountain {
  animation: mtn  20s           linear infinite;
  animation-iteration-count: calc(var(--animationDuration) / 20);
}
#scene #home1 #tv .loop-wrapper .animateHill {
  animation: hill  4s    2s     linear infinite;
  animation-iteration-count: calc(var(--animationDuration) / 5);
}
/* #scene #home1 #tv .loop-wrapper .tree  { animation: tree 3s 0.000s linear infinite; }
#scene #home1 #tv .loop-wrapper .tree:nth-child(2)  { animation: tree2 2s 0.150s linear infinite; }
#scene #home1 #tv .loop-wrapper .tree:nth-child(3)  { animation: tree3 8s 0.050s linear infinite; } */
#scene #home1 #tv .loop-wrapper .animateTree1 {
  animation: tree  3s    0.000s linear infinite;
  animation-iteration-count: calc(var(--animationDuration) / 3);
}
#scene #home1 #tv .loop-wrapper .animateTree2 {
  animation: tree2 2s    0.150s linear infinite;
  animation-iteration-count: calc(var(--animationDuration) / 2);
}
#scene #home1 #tv .loop-wrapper .animateTree3 {
  animation: tree3 8s    0.050s linear infinite;
  animation-iteration-count: calc(var(--animationDuration) / 8);
}
#scene #home1 #tv .loop-wrapper .animateRock {
  animation: rock  4s   -0.530s linear infinite;
  animation-iteration-count: calc(var(--animationDuration) / 4);
}
#scene #home1 #tv .loop-wrapper .animateTruck {
  animation: truck 4s    0.080s ease infinite;
  animation-iteration-count: calc(var(--animationDuration) / 4);
}
#scene #home1 #tv .loop-wrapper .animateWheels {
  animation: truck 4s    0.001s ease infinite;
  animation-iteration-count: calc(var(--animationDuration) / 4);
}
#scene #home1 #tv .loop-wrapper .truck.animateWind::before {
  animation: wind  1.5s  0.000s ease infinite;
  animation-iteration-count: calc(var(--animationDuration) / 1.5);
}

/* HOME1 WINDOW - 'Love Actually' HEART BALLOON PULSATING */
@keyframes heartbeat {
/* generated by Gradienty at https://gradienty.codes/animations (pulse > heartbeat-normal) */
  from { transform: scale(1); transform-origin: center center; animation-timing-function: ease-out; }
  10% { transform: scale(0.91); animation-timing-function: ease-in; }
  17% { transform: scale(0.98); animation-timing-function: ease-out; }
  33% { transform: scale(0.87); animation-timing-function: ease-in; }
  45% { transform: scale(1); animation-timing-function: ease-out;}
}
#scene #home1 #balloon {
  grid-row: 3 / 6;
  grid-column: -2 / -5;
  background-image: url("../media/imgs/objects/balloon-white-heart.png");
  background-size: contain;
  background-repeat: no-repeat;
  z-index: -3;
  pointer-events: auto;
  display: flex;
  justify-content: center;
}
#scene #home1 #balloon .film-title {
  /* background-color: rgb(90 90 90 / 0.5); */
  height: calc(var(--grid-cell-length)/3);
  border-radius: 30%;
  border-bottom-left-radius: 50%;
  border-bottom-right-radius: 50%;
  padding-top: calc(var(--grid-cell-length)/20);
  padding-left: calc(var(--grid-cell-length)/20);
  padding-right: calc(var(--grid-cell-length)/20);
  margin-right: calc(var(--grid-cell-length)/15);
  text-align: center;
  font-size: calc(var(--grid-cell-length)/9);
}
#scene #home1 #balloon .film-title .black {
  color: black;
  font-family:'Arial Narrow', Arial, sans-serif;
}
#scene #home1 #balloon .film-title .red {
  color: red;
  font-family: 'Franklin Gothic Medium', Arial, sans-serif;
  font-weight: bold;
}
#scene #home1 #balloon.animateBalloon {
  animation: heartbeat 1s ease 3;
}

/* HOME3 WINDOW - NIKOLAUSSTIEFEL FILLING BETWEEN BLACKOUTS */
@keyframes appear {
  0%,25%        { opacity: 1;  /* filled-X visible */
  }
  25.0001%,100% { opacity: 0;  /* filled-X invisible for other filled-...'s to become visible in turn */
  }
}
@keyframes blackOut {
  0%,49.5%   { opacity: 0;  /* lights on */
  }
  50.5%,100% { opacity: 1;  /* lights off */
  }
}
#scene #home3 {
  --loop-duration: 13s;
  --blackout-loop-duration: calc(var(--loop-duration)*1/4); /* = per img visibility duration, half of which is lights on vs lights off */
  --swap-delay1: calc(var(--loop-duration)*1/4); /*switch to 2nd img */
  --swap-delay2: calc(var(--loop-duration)*1/2); /*switch to 3rd img*/
  --swap-delay3: calc(var(--loop-duration)*3/4); /*switch to 4th img*/
  --final-blackout-delay: calc(var(--loop-duration) - var(--loop-duration)*1/4*1/2); /*so 4th img is held for a little longer b4 reverting to default*/
  --boots-animation: appear steps(1, end);
}
#scene #home3 #nicolas-boots {
  grid-row: -6 / -2;
  grid-column: 4 / -4;
}
#scene #home3 #nicolas-boots .wrapper {
  width: 100%;
  height: 100%;
  position: relative;
}
#scene #home3 #nicolas-boots .wrapper > div {
  position: absolute;
}
#scene #home3 #nicolas-boots .window-sill {
  width: 140%;
  height: 20%;
  background-color: #816647;
  bottom: 0;
  left: -20%;
}
#scene #home3 #nicolas-boots .boots {
  inset: 0;
  background-size: contain;
  background-position: bottom;
  background-repeat: no-repeat;
  opacity: 0;
}
#scene #home3 #nicolas-boots .boots.filled-none {
  background-image: url("../media/imgs/nicholas-boots/19af06624b623_transparent1.png");
  opacity: 1;
}
#scene #home3 #nicolas-boots .filled-one { background-image: url("../media/imgs/nicholas-boots/19af06624b623_transparent2.png"); }
#scene #home3 #nicolas-boots .filled-two { background-image: url("../media/imgs/nicholas-boots/19af06624b623_transparent3.png"); }
#scene #home3 #nicolas-boots .filled-all { background-image: url("../media/imgs/nicholas-boots/19af06624b623_transparent4.png"); }

#scene #home3 #nicolas-boots .animateBoots0 {
  animation: var(--boots-animation);
  animation-duration: var(--loop-duration);
}
#scene #home3 #nicolas-boots .animateBoots1 {
  animation: var(--boots-animation);
  animation-duration: var(--loop-duration);
  animation-delay: var(--swap-delay1);
}
#scene #home3 #nicolas-boots .animateBoots2 {
  animation: var(--boots-animation);
  animation-duration: var(--loop-duration);
  animation-delay: var(--swap-delay2);
}
#scene #home3 #nicolas-boots .animateBoots3 {
  animation: var(--boots-animation);
  animation-duration: var(--loop-duration);
  animation-delay: var(--swap-delay3);
}
#scene #home3 .cuboid .wall.front .window .inside .blackout {
  grid-row: 3 / -3;
  grid-column: 3 / -3;
  position: absolute;
  inset: 0;
  background-color: #1B1212;
  opacity: 0;
  /* transform: translateZ(50px);
  overflow: visible; */
  pointer-events: none;
}
#scene #home3 .animateWindow {
  animation: blackOut var(--blackout-loop-duration) linear 3 0s, /* only 1st animation runs if default (0s, 1) values left unspecified */
             blackOut var(--blackout-loop-duration) linear 1 var(--final-blackout-delay);
}

/* OUTSIDE#3 SECTION - TREE WITH FLICKERING FAIRY LIGHTS+STAR */
@keyframes flickerOn {
/* Adapted from Gradienty's flicker-in-2-normal animation generated on 2025-11-03 16:50
(changed opacity to colour swap, replaced box-shadow: none w/ --inset-base etc overlay for lights off state, added growing --light-spread glow for lights on state) */
    0% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    10% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    10.1% { background-color: var(--colour2); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    10.2% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    20% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    20.1% { background-color: var(--colour2); box-shadow: 0 0 30px calc(var(--light-spread) * 0.5) rgba(255, 255, 255, 0.25); }
    20.6% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    30% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    30.1% { background-color: var(--colour2); box-shadow: 0 0 30px calc(var(--light-spread) * 0.6) rgba(255, 255, 255, 0.45), 0 0 60px rgba(255, 255, 255, 0.25); }
    30.5% { background-color: var(--colour2); box-shadow: 0 0 30px calc(var(--light-spread) * 0.6) rgba(255, 255, 255, 0.45), 0 0 60px rgba(255, 255, 255, 0.25); }
    30.6% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    45% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    45.1% { background-color: var(--colour2); box-shadow: 0 0 30px calc(var(--light-spread) * 0.7) rgba(255, 255, 255, 0.45), 0 0 60px rgba(255, 255, 255, 0.25); }
    50% { background-color: var(--colour2); box-shadow: 0 0 30px calc(var(--light-spread) * 0.7) rgba(255, 255, 255, 0.45), 0 0 60px rgba(255, 255, 255, 0.25); }
    55% { background-color: var(--colour2); box-shadow: 0 0 30px calc(var(--light-spread) * 0.7) rgba(255, 255, 255, 0.45), 0 0 60px rgba(255, 255, 255, 0.25); }
    55.1% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    57% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    57.1% { background-color: var(--colour2); box-shadow: 0 0 30px calc(var(--light-spread) * 0.8) rgba(255, 255, 255, 0.55), 0 0 60px rgba(255, 255, 255, 0.3); }
    60% { background-color: var(--colour2); box-shadow: 0 0 30px calc(var(--light-spread) * 0.8) rgba(255, 255, 255, 0.55), 0 0 60px rgba(255, 255, 255, 0.3); }
    60.1% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    65% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    65.1% { background-color: var(--colour2); box-shadow: 0 0 30px calc(var(--light-spread) * 0.9) rgba(255, 255, 255, 0.55), 0 0 60px rgba(255, 255, 255, 0.3), 0 0 100px rgba(255, 255, 255, 0.1); }
    75% { background-color: var(--colour2); box-shadow: 0 0 30px calc(var(--light-spread) * 0.9) rgba(255, 255, 255, 0.55), 0 0 60px rgba(255, 255, 255, 0.3), 0 0 100px rgba(255, 255, 255, 0.1); }
    75.1% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    77% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    77.1% { background-color: var(--colour2); box-shadow: 0 0 30px var(--light-spread) rgba(255, 255, 255, 0.6), 0 0 60px rgba(255, 255, 255, 0.4), 0 0 110px rgba(255, 255, 255, 0.2), 0 0 100px rgba(255, 255, 255, 0.1); }
    85% { background-color: var(--colour2); box-shadow: 0 0 30px var(--light-spread) rgba(255, 255, 255, 0.6), 0 0 60px rgba(255, 255, 255, 0.4), 0 0 110px rgba(255, 255, 255, 0.2), 0 0 100px rgba(255, 255, 255, 0.1); }
    85.1% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    86% { background-color: var(--colour1); box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset; }
    86.1% { background-color: var(--colour2); box-shadow: 0 0 30px var(--light-spread) rgba(255, 255, 255, 0.6), 0 0 60px rgba(255, 255, 255, 0.45), 0 0 110px rgba(255, 255, 255, 0.25), 0 0 100px rgba(255, 255, 255, 0.1); }
    100% { background-color: var(--colour2); box-shadow: 0 0 30px var(--light-spread) rgba(255, 255, 255, 0.6), 0 0 60px rgba(255, 255, 255, 0.45), 0 0 110px rgba(255, 255, 255, 0.25), 0 0 100px rgba(255, 255, 255, 0.1); }
}
#scene #secOuts3 #lights-tree {
  grid-row: 1 / -2;
  grid-column: 1 / 8;
  z-index: 1;
  --width: calc(var(--grid-cell-length) * 2.6);
  --height: calc(var(--width) * 1.5);
  --sphere-diameter: calc(var(--width) / 17);
  --star-diameter: calc(var(--width) / 5);
  --light-spread: calc(var(--sphere-diameter) * 0.4);
  --colour1: Gold;
  --colour2: Yellow;
  display: flex;
  justify-content: left;
  align-items: center;
  transform-style: preserve-3d;
  height: var(--height);
  width: var(--width);
}
#scene #secOuts3 #lights-tree .canvas {
  height: 100%;
  width: 100%;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: bottom;
  background-image: url("../media/imgs/trees/fir-tree-1086772_640_roundedStem.png");
  display: grid;
  grid-template-columns: 2fr repeat(9, 1fr) 2.5fr;
  grid-template-rows: 1.6fr 0.6fr 0.7fr 0.9fr 1fr 0.9fr;
  row-gap: calc(var(--width) / 10);
  grid-template-areas: /* T=tier, L=left, C=centre, R=right  */
      " .   .   .   .   .  T0C  .   .   .   .   . "
      " .   .   .   .  T1L T1C T1R  .   .   .   . "
      " .   .   .  T2L T2L T2C T2R T2R  .   .   . "
      " .   .  T3L T3L T3C T3C T3C T3R T3R  .   . "
      "T4L T4L T4L T4L T4C T4C T4C T4R T4R T4R T4R"
      " .   .   .   .   .   .   .   .   .   .   . ";
  justify-items: center;
  transform-style: preserve-3d;
}
#scene #secOuts3 #lights-tree .left {
  align-self: end;
}
#scene #secOuts3 #lights-tree .centre {
  align-self: center;
  margin-top: calc(var(--sphere-diameter) / 4);
}
#scene #secOuts3 #lights-tree .sphere.tier1.right {
  margin-right: calc(var(--sphere-diameter) / 5);
}
#scene #secOuts3 #lights-tree .sphere.tier1.centre { grid-area: T1C; transform: scale(1.1); }
#scene #secOuts3 #lights-tree .sphere.tier1.left   { grid-area: T1L;              transform: scale(0.9); }
#scene #secOuts3 #lights-tree .sphere.tier1.right  { grid-area: T1R;              transform: scale(0.9); }
#scene #secOuts3 #lights-tree .sphere.tier2.centre { grid-area: T2C; transform: scale(1.3); }
#scene #secOuts3 #lights-tree .sphere.tier2.left   { grid-area: T2L;              transform: scale(1.1); }
#scene #secOuts3 #lights-tree .sphere.tier2.right  { grid-area: T2R;              transform: scale(1.1); }
#scene #secOuts3 #lights-tree .sphere.tier3.centre { grid-area: T3C; transform: scale(1.5); }
#scene #secOuts3 #lights-tree .sphere.tier3.left   { grid-area: T3L;              transform: scale(1.3); }
#scene #secOuts3 #lights-tree .sphere.tier3.right  { grid-area: T3R;              transform: scale(1.3); }
#scene #secOuts3 #lights-tree .sphere.tier4.centre { grid-area: T4C; transform: scale(1.7); }
#scene #secOuts3 #lights-tree .sphere.tier4.left   { grid-area: T4L;              transform: scale(1.5); }
#scene #secOuts3 #lights-tree .sphere.tier4.right  { grid-area: T4R;              transform: scale(1.5); }
#scene #secOuts3 #lights-tree .star {
  grid-area: T0C;
  align-self: start;
  margin-left: calc(var(--star-diameter) / 8);
  width: var(--star-diameter);
  height: var(--star-diameter);
  position: relative;
}
#scene #secOuts3 #lights-tree .star .shape {
  --inset-base: calc(var(--star-diameter) / 8);
  position: absolute;
  width: var(--star-diameter);
  aspect-ratio: 1;
  clip-path: polygon(50% 0,
    calc(50%*(1 + sin(.4turn))) calc(50%*(1 - cos(.4turn))),
    calc(50%*(1 - sin(.2turn))) calc(50%*(1 - cos(.2turn))),
    calc(50%*(1 + sin(.2turn))) calc(50%*(1 - cos(.2turn))),
    calc(50%*(1 - sin(.4turn))) calc(50%*(1 - cos(.4turn)))
  );
}
#scene #secOuts3 #lights-tree .star .glow {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%); /* more accurate than alt. margin: calc(var(--star-diameter) / 3.05); */
  width: calc(var(--star-diameter) / 3);
  height: calc(var(--star-diameter) / 3);
  --light-spread: calc(var(--star-diameter) * 0.35);
  border-radius: 50%;
  z-index: -1;
}
#scene #secOuts3 #lights-tree .sphere {
  --inset-base: calc(var(--sphere-diameter) / 6);
  width: var(--sphere-diameter);
  height: var(--sphere-diameter);
  border-radius: 50%;
}
#scene #secOuts3 #lights-tree .light {
  background-color: var(--colour1);
  box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset;
}
#scene #secOuts3 #lights-tree .animateLight {
  animation: flickerOn 3s 0.1s linear /*forwards*/;
}
#scene #secOuts3 #lights-tree .lightOn { /*recreates forwards so can start lit up across days with js*/
  background-color: var(--colour2);
  box-shadow: 0 0 30px var(--light-spread) rgba(255, 255, 255, 0.6),
              0 0 60px rgba(255, 255, 255, 0.45),
              0 0 110px rgba(255, 255, 255, 0.25),
              0 0 100px rgba(255, 255, 255, 0.1);
}

/* OUTSIDE#3 SECTION - CAROLERS SINGING BESIDE TREE */
@keyframes flynBlurIn {
  0% {
    transform: translate(50px, -80px) translateZ(-80px) scaleX(2.5) scaleY(0.2);
    transform-origin: 0% 50%;
    filter: blur(40px);
    opacity: 0;
  }
  80% {
    transform: translate(0) translateZ(30px) scaleY(1) scaleX(1);
    transform-origin: 50% 50%;
    filter: blur(5px);
    opacity: 1;
  }
  100% {
    transform: translate(0) translateZ(0px) scaleY(1) scaleX(1);
    transform-origin: 50% 50%;
    filter: blur(0);
    opacity: 1;
  }
}
@keyframes stayThenFade {
  0%,95% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}
@keyframes ping { /*adapted from ping at https://animista.net/ */
  0% {
    transform: scale(0.2);
    opacity: 0.8;
  }
  26.6% {
    transform: scale(1.2);
    opacity: 0;
  }
  33.3% {
    transform: scale(2.2);
    opacity: 0;
  }
  34%,100% {
    opacity: 0;
  }
}
@keyframes shake { /*adapted from shake-top at https://animista.net/ */
  0%,100%     { opacity: 1; transform: rotate(0deg); transform-origin: 50% 0;
  }
  10%         { opacity: 1; transform: rotate(2deg);
  }
  20%,40%,60% { opacity: 1; transform: rotate(-4deg);
  }
  30%,50%,70% { opacity: 1; transform: rotate(4deg);
  }
  80%         { opacity: 1; ransform: rotate(-2deg);
  }
  90%         { opacity: 1; transform: rotate(2deg);
  }
}
@keyframes puffOut { /*adapted from puff-out-center at https://animista.net/ */
  0%   { opacity: 1; }
  20%  { opacity: 1; transform: scale(1); filter: blur(0px);
  }
  100% { opacity: 0; transform: scale(2); filter: blur(4px);
  }
}
#scene #secOuts3 #carolers {
  grid-row: 4 / -1;
  grid-column: 5 / -1;
  z-index: 2;
  --song-duration: 29s;
  --staff-appear-duration: 2s;
  --staff-stay-duration: calc(var(--song-duration) - var(--staff-appear-duration));
  --note-loop-duration: 4.3s;
  --note1-delay: calc(var(--staff-appear-duration) + 1s);
  --note2-delay: calc(var(--note1-delay) + var(--note-loop-duration)*1/3); /*switch to 2nd note*/
  --note3-delay: calc(var(--note1-delay) + var(--note-loop-duration)*2/3); /*switch to 3rd note*/
  --note-animation: ping var(--note-loop-duration) ease-in-out;
  display: grid;
  grid-template-rows: repeat(9, 1fr);
  grid-template-columns: repeat(9, 1fr);
}
#scene #secOuts3 #carolers div {
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}
#scene #secOuts3 #carolers .people {
  grid-row: -6 / -1;
  grid-column: 1 / -1;
  background-image: url('../media/imgs/people/carolers.png');
}
#scene #secOuts3 #carolers .staff {
  grid-row: 1 / 5;
  grid-column: 1 / -1;
  background-image: url('../media/imgs/effects/notes-5407665_640.png');
  /* animation: flynBlurIn 2s cubic-bezier(0.250, 0.460, 0.450, 0.940); */
  opacity: 0;
}
#scene #secOuts3 #carolers .note {
  opacity: 0;
  /* animation: ping 2.5s ease-in-out 3; */
}
#scene #secOuts3 #carolers .eighth {
  grid-area: 8 / 5 / span 1 / span 1;
  background-image: url('../media/imgs/effects/note-151921_640.png');
}
#scene #secOuts3 #carolers .eighths {
  grid-area: 4 / 4 / span 1 / span 1;
  background-image: url('../media/imgs/effects/note-159509_640.png');
}
#scene #secOuts3 #carolers .sixteenth {
  grid-area: 4 / 9 / span 1 / span 1;
  background-image: url('../media/imgs/effects/note-151930_640.png');
}
#scene #secOuts3 #carolers .tooltip {
  grid-row: -3 / -1;
  grid-column: -6 / -1;
  opacity: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
  --em-size: calc(var(--grid-cell-length)/4);
  --scale-down-factor: 0.4;
  font-size: calc(var(--em-size)*0.8);
  /*slightly tweaked orig. from https://css-generators.com/tooltip-speech-bubble/ */
  max-width: 15ch;
  /* triangle dimension */
  --b: calc(2*var(--em-size)*var(--scale-down-factor)); /* base */
  --h: calc(1*var(--em-size)*var(--scale-down-factor)); /* height */
  --p: 25%; /* triangle position (0%:left 100%:right) */
  --r: calc(1.2*var(--em-size)*var(--scale-down-factor)); /* the radius */
  --c: rgb(200,200,200,0.5);
  /* padding: calc(1*var(--em-size)*var(--scale-down-factor)); */
  border-radius: min(var(--r),var(--p) - var(--b)/2) min(var(--r),100% - var(--p) - var(--b)/2) var(--r) var(--r)/var(--r);
  clip-path: polygon(0 0,0 100%,100% 100%,100% 0,
    min(100%,var(--p) + var(--b)/2) 0,
    var(--p) calc(-1*var(--h)),
    max(0%  ,var(--p) - var(--b)/2) 0);
  background: var(--c);
  border-image: conic-gradient(var(--c) 0 0) fill 0/
    0 calc(100% - var(--p) - var(--b)/2) var(--r) calc(var(--p) - var(--b)/2)/
    var(--h) 0 0 0;
}
#scene #secOuts3 #carolers .tooltip em {
  font-weight: bold;
}
#scene #secOuts3 #carolers.audio‑played .tooltip {
  display: none !important; /* hides tooltip forever once music has played */
}
#scene #secOuts3 #carolers .animateTooltip {
  animation: shake   0.8s 0.1s 2 cubic-bezier(0.455, 0.030, 0.515, 0.955),
             puffOut 2s   1.7s 1 cubic-bezier(0.165, 0.840, 0.440, 1.000);
}
#scene #secOuts3 #carolers .animateStaff {
  animation: flynBlurIn var(--staff-appear-duration) 0s cubic-bezier(0.250, 0.460, 0.450, 0.940),
             stayThenFade var(--staff-stay-duration) var(--staff-appear-duration) ease-out;
}
#scene #secOuts3 #carolers .animateNote1 {
  animation: var(--note-animation) var(--note1-delay) 6; /* (29s-song - 3s-note1-delay) / 4.3s-note-loop = 6 rounded down */
}
#scene #secOuts3 #carolers .animateNote2 {
  animation: var(--note-animation) var(--note2-delay) 6;
}
#scene #secOuts3 #carolers .animateNote3 {
  animation: var(--note-animation) var(--note3-delay) 5; /* removed final note as music's fading out (already stopped) at this point */
}

/* OUTSIDE#5 SECTION - COLOUR CHANGING TREES */
@keyframes changeColourYPO {
    0%,5%,95%,100% { background-color: var(--colour1); }
    20%,30% { background-color: var(--colour2); }
    45%,55% { background-color: var(--colour3) ; }
    70%,80% { background-color: var(--colour4); }
}
@keyframes changeColourOYP {
    0%,5%,95%,100% { background-color: var(--colour1); }
    20%,30% { background-color: var(--colour4); }
    45%,55% { background-color: var(--colour2) ; }
    70%,80% { background-color: var(--colour3); }
}
@keyframes changeColourPOY {
    0%,5%,95%,100% { background-color: var(--colour1); }
    20%,30% { background-color: var(--colour3); }
    45%,55% { background-color: var(--colour4) ; }
    70%,80% { background-color: var(--colour2); }
}
#scene #secOuts5 #bg-trees {
    --height: calc(var(--grid-cell-length) * 1.3); /*orig. 100px*/
    --width: calc(var(--height) * 0.861);
    --sphere-diameter: calc(var(--height) / 11);
    --inset-base: calc(var(--sphere-diameter) / 6);
    --animation-speed: 9s linear 3;
    --colour1: red;
    --colour2: yellow;
    --colour3: pink;
    --colour4: orange;
    display: flex;
    justify-content: end;
}
#scene #secOuts5 #bg-trees .canvas {
    height: var(--height);
    width: var(--width);
    background-image: url('../media/imgs/trees/fir-tree-1096466_640.png');
    background-size: contain;
    background-repeat: no-repeat;
    display: grid;
    grid-template-rows: repeat(6, 1fr);
    grid-template-columns: repeat(7, 1fr);
}
#scene #secOuts5 #bg-trees .canvas .sphere.sph1 { grid-area: 2 / 4 / span 1 / span 1; justify-self: end;    align-self: end; }
#scene #secOuts5 #bg-trees .canvas .sphere.sph2 { grid-area: 3 / 3 / span 1 / span 1; justify-self: end;    align-self: center; }
#scene #secOuts5 #bg-trees .canvas .sphere.sph3 { grid-area: 3 / 5 / span 1 / span 1; justify-self: center; align-self: end; }
#scene #secOuts5 #bg-trees .canvas .sphere.sph4 { grid-area: 4 / 3 / span 1 / span 1; justify-self: start;  align-self: end; }
#scene #secOuts5 #bg-trees .canvas .sphere.sph5 { grid-area: 4 / 5 / span 1 / span 1; justify-self: start;  align-self: end; }
#scene #secOuts5 #bg-trees .canvas .sphere.sph6 { grid-area: 5 / 2 / span 1 / span 1; justify-self: center; align-self: center; }
#scene #secOuts5 #bg-trees .canvas .sphere.sph7 { grid-area: 5 / 4 / span 1 / span 1; justify-self: center; align-self: end; }
#scene #secOuts5 #bg-trees .canvas .sphere.sph8 { grid-area: 5 / 6 / span 1 / span 1; justify-self: center; align-self: center; }
#scene #secOuts5 #bg-trees .canvas .sphere {
    height: var(--sphere-diameter);
    width: var(--sphere-diameter);
    border-radius: 50%;
    background-color: var(--colour1);
    box-shadow: rgba(50, 50, 93, 0.25) 0px calc(var(--inset-base)*5) calc(var(--inset-base)*10) calc(var(--inset-base)*-2) inset, rgba(0, 0, 0, 0.3) 0px calc(var(--inset-base)*3) calc(var(--inset-base)*6) calc(var(--inset-base)*-3) inset;
}
#scene #secOuts5 #bg-trees .animateTree1 {
    animation: changeColourYPO var(--animation-speed);
}
#scene #secOuts5 #bg-trees .animateTree2 {
    animation: changeColourOYP var(--animation-speed);
}
#scene #secOuts5 #bg-trees .animateTree3 {
    animation: changeColourPOY var(--animation-speed);
}

/* OUTSIDE#5 SECTION - CHILDREN GOING UP & DOWN ON PLAYGROUND SEESAW */
@keyframes moveUpnDown1 {
  0%   { transform: translateY(0%); }
  100% { transform: translateY(66%); }
}
@keyframes moveUpnDown2 {
  0%   { transform: rotateZ(13deg); }
  100% { transform: rotateZ(-13deg); }
}
#scene #secOuts5 #seesaw {
  --animation-details: 1.5s 6 ease-in-out; /*duration, loop-count (EVEN NUMBER), acceleration-curve*/
  height: 100%;
  width: 100%;
}
#scene #secOuts5 #seesaw .wrapper {
  height: 100%;
  width: 100%;
  display: grid;
  grid-template-rows: repeat(3, 1fr);
  grid-template-columns: repeat(5, 1fr);
}
#scene #secOuts5 #seesaw .wrapper > .child {
  z-index: 2;
  grid-row: 1 / -1;
  background-size: contain;
  background-repeat: no-repeat;
  height: 60%;
  margin-left: 10%; /*works with both due to diff grid-column span. Alternative to justify-... which removes both images for some unknown reason */
}
#scene #secOuts5 #seesaw .wrapper .child.left {
  grid-column: 1 / 3; /*span 2*/
  background-image: url('../media/imgs/people/child-9947682-left.png');
}
#scene #secOuts5 #seesaw .wrapper .child.right {
  grid-column: -2 / -1; /*span 1*/
  background-image: url('../media/imgs/people/child-9947682-right.png');
  transform: translateY(66%);
}
#scene #secOuts5 #seesaw .wrapper .plank {
  z-index: 1;
  grid-row: -2 / -1;
  grid-column: 1 / -1;
  align-self: start;
  width: 100%;
  height: 15%;
  background-color: #483C32;
  transform: rotateZ(13deg);
}
#scene #secOuts5 #seesaw .wrapper .pole {
  z-index: 2;
  grid-row: 2 / -1;
  grid-column: 3 / -3;
  align-self: end;
  --r: calc(100%/6); /* border radius */
  width: 100%;
  height: 66%;
  aspect-ratio: 1/cos(30deg);
  -webkit-mask:
    linear-gradient(#0000 calc(3*var(--r)/2),#000 0),
    radial-gradient(var(--r) at 50% calc(2*var(--r)),#000 98%,#0000 101%);
  clip-path: polygon(50% 0,100% 100%,0 100%);
  background: linear-gradient(45deg,#FA6900,#C02942);
}
#scene #secOuts5 #seesaw .animateChild1 {
  animation: moveUpnDown1 var(--animation-details) alternate;
}
#scene #secOuts5 #seesaw .animateChild2 {
  animation: moveUpnDown1 var(--animation-details) alternate-reverse;
}
#scene #secOuts5 #seesaw .animatePlank {
  animation: moveUpnDown2 var(--animation-details) alternate;
}


nav {
    z-index: 99;
    /* position: absolute; */
    /* height: 100vh;
    width: 100vw; */
    background-color: whitesmoke;
    padding: 0.5ch 0.9ch;
}

nav ol {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(3.8rem, 1fr));
    align-items: end;
}
nav ol li#month {
    justify-self: right;
}
nav ol li {
    padding: 0.2ch 0;
}
nav ul {
    display: flex;
    justify-content: space-between;
}
nav ul button {
    margin: 1ch 0.5ch;
}

#scene {
    /* position: absolute;
    top: 0; */
    perspective: 1300px;
    transform-style: preserve-3d;
    /* display: grid; */
}

figcaption.sr-only { /*battle-tested for over a decade*/
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  border: 0;
}

#sign {
    --width: 200px;
    --height: calc(var(--width));
    transform-style: preserve-3d;
}

#sign .canvas {
    width: var(--width);
    height: var(--height);
    background-image: url(../media/imgs/signs/sign-6964107_640.png);
    background-size: cover;
    background-repeat: no-repeat;
    display: grid;
    grid-template: ".      .      ." 0.85fr
                   ". menu-button ." 1.7fr
                   ".      .      ." 4fr / 0.8fr 4.8fr 1fr;
}

#sign #nav-toggle {
    grid-area: menu-button;
    background-color: rgb(0 0 0 / 0);
    border-color: rgb(0 0 0 / 0);
    color: white;
    font-size: 1.3rem;
    line-height: 1.1;
    font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
}
#sign #nav-toggle span::before {
    content: "↻ ";
    font-weight: bold;
    font-size: 1.1rem;
}
#sign #nav-toggle:hover,
#sign #nav-toggle:focus {
    box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;
    box-shadow: rgba(0, 0, 0, 0.56) 0px 22px 70px 4px;
    box-shadow: rgba(0, 0, 0, 0.4) 0px 30px 90px;
    text-shadow: 1px 1px 2px silver
}

/* ROTATING COLOURED DICE */
@keyframes rotate {
    100% {
        transform: rotate3d(1, 1, 1, 180deg) rotate3d(1, 2, 3, 160deg);
    }
}
#dice {
    --opacity: 70%;
    --edge-length: 80px;
    --radius: calc(var(--edge-length) / 2);
    --move: translateZ(var(--radius));
    perspective: 2600px;
    transform-style: preserve-3d;
    display: flex;
    justify-content: center;
    align-items: center;
}
#dice .cube {
    width: var(--edge-length);
    height: var(--edge-length);
    margin: calc(var(--edge-length) / 2);
    transform: rotate3d(1, 1, 1, 30deg);
    transition: transform 7s ease-in-out;
    transform-style: preserve-3d;
}
@media (max-width: 500px) {
    #dice .cube {
        transform: rotate3d(1, 1, 1, 200deg);
        animation: rotate 7s 8s 2 ease-in-out alternate;
    }
}
#dice .face {
    position: absolute;
    width: 100%;
    height: 100%;
    font-size: calc(var(--edge-length) * 3/5);
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
}
#dice .front {
    background: rgb(90 90 90 / var(--opacity));
    transform: var(--move);
}
#dice .back {
    background: rgb(0 210 0 / var(--opacity));
    transform: rotateY(180deg) var(--move);
}
#dice .right {
    background: rgb(210 0 0 / var(--opacity));
    transform: rotateY(90deg) var(--move);
}
#dice .left {
    background: rgb(0 0 210 / var(--opacity));
    transform: rotateY(-90deg) var(--move);
}
#dice .top {
    background: rgb(210 210 0 / var(--opacity));
    transform: rotateX(90deg) var(--move);
}
#dice .bottom {
    background: rgb(210 0 210 / var(--opacity));
    transform: rotateX(-90deg) var(--move);
}

/* HOVER ANIMATION */
/*
#dice {
    transition: transform 7s ease-in-out;
}
#dice:hover {
    transform: rotate3d(1, 1, 1, 180deg) rotate3d(1, 2, 3, 160deg);
}
*/
/*nb.
--best practice to define transition on the element for all scenarios to work (in this case would work if on #dice:hover instead) */

/* JS TRIGGERED ANIMATION - VIA TRANSFORM */
/*
#dice .cube {
    transition: transform 7s ease-in-out;
}
#dice .cube.animateDice {
    transform: rotate3d(1, 1, 1, 180deg) rotate3d(1, 2, 3, 160deg);
}
*/
/*nb.
--transition must be paired w/ the starting transform to work
--can be temperamental (i.e. run sometimes but not always) if the exact element (.cube.animateDice) isn't specified */

/* JS TRIGGERED ANIMATION - VIA @KEYFRAMES */

#dice .animateDice {
    animation: rotate 7s 2 ease-in-out alternate;
}


/* OPENING XMAS PRESENT */
@keyframes shakeBox {
    0%, 100% {
        --xOffset: 0; --yOffset: 0; --zOffset: 0;
        --xRotation: 0; --yRotation: 0; --zRotation: 0; --rotationAngle: 0deg;
    }
    10% {
        --xOffset:  3px; --yOffset: -2px; --zRotation: 1; --rotationAngle:  1.2deg; }
    25% {
        --xOffset: -3px; --yOffset:  2px; --xRotation: 1; --rotationAngle: -1.0deg; }
    40% {
        --xOffset:  4px; --yOffset: -3px; --yRotation: 1; --rotationAngle:  1.0deg; }
    60% {
        --xOffset: -4px; --yOffset:  2px; --xRotation: 1; --rotationAngle: -1.2deg; }
    80% {
        --xOffset:  2px; --yOffset: -2px; --zRotation: 1; --rotationAngle:  0.8deg; }
}
@keyframes openCloseLeftFlap {
    0%, 100% {
        transform: rotateY(0deg);
    }
    50%, 80% {
        transform: rotateY(-120deg);
    }
}
@keyframes openCloseRightFlap {
    0%, 100% {
        transform: translateX(var(--radius)) rotateY(0deg);
    }
    50%, 80% {
        transform: translateX(var(--radius)) rotateY(120deg);
    }
}
/* @keyframes revealContents {}
@keyframes blinkEyes {} */
#present {
    --edge-length: 150px;
    --radius: calc(var(--edge-length) / 2);
    --fraction1: calc(var(--edge-length) * 1/25);
    --fraction2: calc(var(--edge-length) * 1/300);
    --left-side: rotateY(90deg);
    --right-side: rotateY(-90deg);
    --top-side: rotateX(-90deg);
    --bottom-side: rotateX(90deg);
    --right-front-side: translateX(var(--radius));
    --back-side: translateZ(calc(var(--edge-length) * -1));
    --contents: translateZ(calc(var(--edge-length) * -99/100));
    --shake-speed1: 1.2s 0s     linear;
    --shake-speed2: 1s   1.8s 2 cubic-bezier( 0.79, 0.33, 0.14, 0.53 );
    --flap-speed:   6s   3.4s   ease-out;
    --animation-speed3: 5.5s 5s ease-in;
    --animation-speed4: 5.5s 5s ease-in;
    transform-style: preserve-3d;
    display: flex;
    justify-content: center;
    align-items: center;
}
#present .cube {
    height: var(--edge-length);
    width: var(--edge-length);
    margin: var(--radius);
    transform: rotate3d(10, 2, -1, 30deg)
                translate3d(var(--xOffset,0), var(--yOffset,0), var(--zOffset,0))
                rotate3d(var(--xRotation,0), var(--yRotation,0), var(--zRotation,0), var(--rotationAngle,0deg));
    transform-style: preserve-3d;
}
#present .side {
    position: absolute;
    height: 100%;
    width: 100%;
    background-image: url("../media/imgs/gift-wrap/christmas-4686429_640.jpg");
    background-size: cover;
    border: brown solid var(--fraction2);
}
#present .left {
    transform-origin: left;
    transform: var(--left-side);
}
#present .right {
    transform-origin: right;
    transform: var(--right-side);
}
#present .top {
    transform-origin: top;
    transform: var(--top-side);
}
#present .bottom {
    transform-origin: bottom;
    transform: var(--bottom-side);
}
#present .back {
    transform: var(--back-side);
}
#present .front-left {
    width: 50%;
    background-position: left;
    transform-origin: left;
    transform-style: preserve-3d;
}
#present .ribbon {
    transform: translateZ(var(--fraction1)) rotateZ(10deg);
    display: flex;
    justify-content: center;
}
#present .ribbon img {
    width: 80%;
    padding-right: var(--fraction1);
    padding-top: calc(var(--fraction1) * 2);
}
#present .front-right {
    width: 50%;
    background-position: right;
    transform-origin: right;
    transform: var(--right-front-side);
}
#present .contents {
    transform: var(--contents);
    transform-style: preserve-3d;
}
/* #present .eye {}
#present .leftEye {}
#present .rightEye {} */
#present .animateGiftBox {
    animation: shakeBox var(--shake-speed1),
                shakeBox var(--shake-speed2);
}
#present .animateLeftFlap {
    animation: openCloseLeftFlap var(--flap-speed);
}
#present .animateRightFlap {
    animation: openCloseRightFlap var(--flap-speed);
}
/* #present .animateGiftBoxContents {
    animation: revealContents var(--animation-speed3);
}
#present .animateGiftBoxContentsEyes {
    animation: blinkEyes var(--animation-speed4);
} */


/* TREE WITH SHAKING BAUBLES */
@keyframes tiltStem {
    30% {
        transform: rotateZ(-0.5deg);
    }
    60% {
        transform: rotateZ(0.2deg);
    }
    90% {
        transform: rotateZ(-0.1deg);
    }
}
@keyframes tiltBauble {
    30% {
        transform: translateZ(var(--z-offset)) rotateY(12deg) rotateX(-4deg) rotateZ(2deg);
    }
    60% {
        transform: translateZ(var(--z-offset)) rotateY(9deg) rotateX(2deg) rotateZ(-1deg);
    }
    90% {
        transform: translateZ(var(--z-offset)) rotateY(7deg) rotateX(-1deg);
    }
}
@keyframes scaleBauble {
    30% {
        transform: scale(0.95) translate(calc(var(--move-unit) * -14), calc(var(--move-unit) * -8));
    }
    60% {
        transform: scale(1.03) translate(calc(var(--move-unit) * 10), calc(var(--move-unit) * 5));
    }
    90% {
        transform: scale(0.99) translate(calc(var(--move-unit) * -0.5), calc(var(--move-unit) * -1.5));
    }
}
/* alt. direction fwd-left (nb. requires bauble tops' 6deg default rotation instead of -6deg): */
/* @keyframes tiltBauble {
    30% {
        transform: translateZ(var(--z-offset)) rotateY(-12deg) rotateX(4deg) rotateZ(2deg);
    }
    60% {
        transform: translateZ(var(--z-offset)) rotateY(-9deg) rotateX(-2deg) rotateZ(-1deg);
    }
    90% {
        transform: translateZ(var(--z-offset)) rotateY(-7deg) rotateX(1deg);
    }
}
@keyframes scaleBauble {
    30% {
        transform: scale(1.05) translate(calc(var(--move-unit) * -14), calc(var(--move-unit) * 8));
    }
    60% {
        transform: scale(0.97) translate(calc(var(--move-unit) * 10), calc(var(--move-unit) * -5));
    }
    90% {
        transform: scale(1.01) translate(calc(var(--move-unit) * -0.5), calc(var(--move-unit) * 1.5));
    }
} */
.bauble-tree {
    --width: 440px;
    --height: calc(var(--width) * 1.3954);
    --frame-width: calc(var(--width) / 20);
    --bauble-width: calc(var(--width) / 7 * var(--bauble-size-factor,1));
    /* --top-height: calc(var(--bauble-width) * 230/320); */
    /* --overlap: calc(var(--top-height) / 21); */
    /* --bauble-height: calc(var(--top-height) + var(--bauble-width) - var(--overlap)); */
    --move-unit: calc(var(--bauble-width) / 320);
    --animation-speed1: 1s ease-in-out both;
    --animation-speed2: 0.9s 0.1s ease-in-out both;
    --grid-span: 20;
    width: var(--height);
    display: grid;
    grid-template-rows: calc(var(--frame-width)/2) auto calc(var(--frame-width)/2);
    grid-template-columns: calc(var(--frame-width)/2) auto calc(var(--frame-width)/2);
    transform-style: preserve-3d;
}
.bauble-tree .frame {
    grid-area: 1 / 1 / -1 / -1;
    border: var(--frame-width) solid #483C32;
    z-index: 1;
}
.bauble-tree .canvas {
    grid-area: 2 / 2 / -2 / -2;
    width: var(--width);
    height: var(--height);
    background-image: url("../media/imgs/trees/fir-trees-6578788_640.png");
    background-size: cover;
    background-position: bottom;
    transform-origin: bottom left;
    display: grid;
    grid-template-rows: repeat(100, 1fr);
    grid-template-columns: repeat(100, 1fr);
    justify-items: center;
}
.bauble-tree #bauble-red  { --hanging-point-col: 37; --hanging-point-row: 2;  }
.bauble-tree #bauble-blue { --hanging-point-col: 18; --hanging-point-row: 15; }
.bauble-tree #bauble-prpl { --hanging-point-col: 50; --hanging-point-row: 32; }
.bauble-tree #bauble-turq { --hanging-point-col: 23; --hanging-point-row: 54; }
.bauble-tree #bauble-gold { --hanging-point-col: 52; --hanging-point-row: 54; }
.bauble-tree #bauble-indg { --hanging-point-col: 78; --hanging-point-row: 66; }
.bauble-tree #bauble-pink { --hanging-point-col: 30; --hanging-point-row: 82;
}
.bauble-tree .bauble {
    grid-row: var(--hanging-point-row, 50) / span var(--grid-span);
    grid-column: calc(var(--hanging-point-col, 50) - var(--grid-span)/2) / span var(--grid-span);
    width: calc(var(--width) / 7 * var(--bauble-size-factor,1)); /* used in many calculations below, but cannot be saved into a variable as too many substitutions lead to browser time out before calculation is completed */
    height: calc(var(--width)/7*var(--bauble-size-factor,1) + var(--width)/7*var(--bauble-size-factor,1)*230/320 - var(--width)/7*var(--bauble-size-factor,1)*0.034226); /*= sphere-height + bauble-top-height - overlap (all based on bauble width) */
    perspective: 300px; /* for depth illusion */
    transform-style: preserve-3d;
    position: relative;
}
.bauble-tree .bauble.s  { --bauble-size-factor: 0.9; }
.bauble-tree .bauble.m  { --bauble-size-factor: 1;   }
.bauble-tree .bauble.l  { --bauble-size-factor: 1.1; }
.bauble-tree .bauble.xl { --bauble-size-factor: 1.2;
}
.bauble-tree .bauble-part {
    position: absolute;
    width: 100%;
    background-size: contain;
    background-repeat: no-repeat;
    transform-style: preserve-3d;
}
.bauble-tree .top {
    --z-offset: calc(var(--width)/7*var(--bauble-size-factor,1) * 0.07); /* z-offset/translateZ as z-index doesn't work when there's perspective */
    transform: rotateY(-6deg) translateZ(var(--z-offset)); /* for alt. direction change to 6deg */
    height: calc(var(--width)/7*var(--bauble-size-factor,1) * 230/320);
    transform-origin: top center;
}
.bauble-tree .sphere {
    bottom: 0;
    background-position: bottom; /* this plus following properties together clip the image into a perfect sphere */
    height: calc(var(--width) / 7 * var(--bauble-size-factor,1)); /* same as bauble width */
    border-radius: 50%; /* circle shape */
}
.bauble-tree #bauble-red  .top    { background-image: url(../media/imgs/baubles/bauble-1814941_640_top.png); }
.bauble-tree #bauble-red  .sphere { background-image: url(../media/imgs/baubles/bauble-1814941_640_bottom.png); }
.bauble-tree #bauble-blue .top    { background-image: url(../media/imgs/baubles/bauble-1814972_640_top.png); }
.bauble-tree #bauble-blue .sphere { background-image: url(../media/imgs/baubles/bauble-1814972_640_bottom.png); }
.bauble-tree #bauble-prpl .top    { background-image: url(../media/imgs/baubles/bauble-1814937_640_top.png); }
.bauble-tree #bauble-prpl .sphere { background-image: url(../media/imgs/baubles/bauble-1814937_640_bottom.png); }
.bauble-tree #bauble-turq .top    { background-image: url(../media/imgs/baubles/bauble-1814977_640_top.png); }
.bauble-tree #bauble-turq .sphere { background-image: url(../media/imgs/baubles/bauble-1814977_640_bottom.png); }
.bauble-tree #bauble-gold .top    { background-image: url(../media/imgs/baubles/bauble-1814949_640_top.png); }
.bauble-tree #bauble-gold .sphere { background-image: url(../media/imgs/baubles/bauble-1814949_640_bottom.png); }
.bauble-tree #bauble-indg .top    { background-image: url(../media/imgs/baubles/bauble-1814951_640_top.png); }
.bauble-tree #bauble-indg .sphere { background-image: url(../media/imgs/baubles/bauble-1814951_640_bottom.png); }
.bauble-tree #bauble-pink .top    { background-image: url(../media/imgs/baubles/bauble-1814943_640_top.png); }
.bauble-tree #bauble-pink .sphere { background-image: url(../media/imgs/baubles/bauble-1814943_640_bottom.png);
}
.bauble-tree .animateTree {
    animation: tiltStem var(--animation-speed1);
}
.bauble-tree .free .animateFreeBaubleTop {
    animation: tiltBauble var(--animation-speed1);
}
.bauble-tree .free .animateFreeBaubleSphere {
    animation: scaleBauble var(--animation-speed1);
}
.bauble-tree .constricted .animateConstrictedBaubleTop {
    animation: tiltBauble var(--animation-speed2);
}
.bauble-tree .constricted .animateConstrictedBaubleSphere {
    animation: scaleBauble var(--animation-speed2);
}

/*
GO THROUGH THESE LINKS (for spheres):
https://cssanimation.rocks/spheres/
https://css-shape.com/sphere/
https://stackoverflow.com/questions/45238194/how-can-i-create-pure-css-3-dimensional-spheres
https://freefrontend.com/css-spheres/
-> https://codepen.io/Taluska/pen/Eajpwvm
-> https://codepen.io/josetxu/pen/pvJxEoW
*/


@keyframes highlightTodaysAnimation1 {
/*COLOUR CHANGING ROUND HALO - works on irregularly shaped parent wrappers*/
  0%, 80%, 100% {
    border-radius: 50%;
    box-shadow: none;
  }
  20%, 60% {
    border-radius: 50%;
    /* box-shadow: 0px 5px 20px 10px rgba(165, 39, 255, 1); */
    box-shadow: 0 0 25px 15px rgba(165, 39, 255, 1);
  }
  40% {
    border-radius: 50%;
    /* box-shadow: 0px 5px 20px 10px orange; */
    box-shadow: 0 0 25px 15px orange;
  }
}
@keyframes highlightTodaysAnimation2 {
/*COLOUR CHANGING RECTANGULAR HALO - works on rectangular parent wrappers*/
  0%, 80%, 100% {
    box-shadow: none;
  }
  20%, 60% {
    box-shadow: 0 0 25px 15px rgba(165, 39, 255, 1);
  }
  40% {
    box-shadow: 0 0 25px 15px orange;
  }
}
@keyframes highlightTodaysAnimation3 {
/*COLOUR CHANGING BACKDROP - works on no-wrap images with transparency & very large objects*/
  0%,80%,100% {
    filter: drop-shadow(0 0 0 rgba(0,0,0,0));
  }
  20%,60% {
    filter: drop-shadow(0 0 15px rgba(165, 39, 255, 1));
  }
  40% {
    filter: drop-shadow(0 0 15px orange);
  }
}
.animateTodaysAnimation1 {
  animation: highlightTodaysAnimation1 3.5s ease-in;
}
.animateTodaysAnimation2 {
  animation: highlightTodaysAnimation2 3.5s ease-in;
}
.animateTodaysAnimation3 {
  animation: highlightTodaysAnimation3 3.5s ease-in;
}